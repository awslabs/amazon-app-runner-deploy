"use strict";var pf=Object.create;var Dn=Object.defineProperty;var mf=Object.getOwnPropertyDescriptor;var ff=Object.getOwnPropertyNames;var gf=Object.getPrototypeOf,hf=Object.prototype.hasOwnProperty;var V=(e,t)=>()=>(e&&(t=e(e=0)),t);var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),kn=(e,t)=>{for(var r in t)Dn(e,r,{get:t[r],enumerable:!0})},$i=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ff(t))!hf.call(e,o)&&o!==r&&Dn(e,o,{get:()=>t[o],enumerable:!(n=mf(t,o))||n.enumerable});return e};var Ke=(e,t,r)=>(r=e!=null?pf(gf(e)):{},$i(t||!e||!e.__esModule?Dn(r,"default",{value:e,enumerable:!0}):r,e)),qi=e=>$i(Dn({},"__esModule",{value:!0}),e);var zn=I(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.toCommandProperties=Jt.toCommandValue=void 0;function yf(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Jt.toCommandValue=yf;function wf(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Jt.toCommandProperties=wf});var Hi=I(ee=>{"use strict";var Ef=ee&&ee.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Sf=ee&&ee.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Cf=ee&&ee.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Ef(t,e,r);return Sf(t,e),t};Object.defineProperty(ee,"__esModule",{value:!0});ee.issue=ee.issueCommand=void 0;var Af=Cf(require("os")),Vi=zn();function Bi(e,t,r){let n=new rs(e,t,r);process.stdout.write(n.toString()+Af.EOL)}ee.issueCommand=Bi;function xf(e,t=""){Bi(e,{},t)}ee.issue=xf;var ji="::",rs=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=ji+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let o=this.properties[n];o&&(r?r=!1:t+=",",t+=`${n}=${Rf(o)}`)}}return t+=`${ji}${_f(this.message)}`,t}};function _f(e){return Vi.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Rf(e){return Vi.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function en(){return Ln>Fn.length-16&&(Gi.default.randomFillSync(Fn),Ln=0),Fn.slice(Ln,Ln+=16)}var Gi,Fn,Ln,ns=V(()=>{Gi=Ke(require("crypto")),Fn=new Uint8Array(256),Ln=Fn.length});var Wi,Ki=V(()=>{Wi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function vf(e){return typeof e=="string"&&Wi.test(e)}var Je,tn=V(()=>{Ki();Je=vf});function If(e,t=0){let r=(F[e[t+0]]+F[e[t+1]]+F[e[t+2]]+F[e[t+3]]+"-"+F[e[t+4]]+F[e[t+5]]+"-"+F[e[t+6]]+F[e[t+7]]+"-"+F[e[t+8]]+F[e[t+9]]+"-"+F[e[t+10]]+F[e[t+11]]+F[e[t+12]]+F[e[t+13]]+F[e[t+14]]+F[e[t+15]]).toLowerCase();if(!Je(r))throw TypeError("Stringified UUID is invalid");return r}var F,Ye,rn=V(()=>{tn();F=[];for(let e=0;e<256;++e)F.push((e+256).toString(16).substr(1));Ye=If});function bf(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let s=e.node||Ji,i=e.clockseq!==void 0?e.clockseq:os;if(s==null||i==null){let p=e.random||(e.rng||en)();s==null&&(s=Ji=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),i==null&&(i=os=(p[6]<<8|p[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:is+1,d=a-ss+(c-is)/1e4;if(d<0&&e.clockseq===void 0&&(i=i+1&16383),(d<0||a>ss)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ss=a,is=c,os=i,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=l&255;let u=a/4294967296*1e4&268435455;o[n++]=u>>>8&255,o[n++]=u&255,o[n++]=u>>>24&15|16,o[n++]=u>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(let p=0;p<6;++p)o[n+p]=s[p];return t||Ye(o)}var Ji,os,ss,is,Yi,Xi=V(()=>{ns();rn();ss=0,is=0;Yi=bf});function Tf(e){if(!Je(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Un,as=V(()=>{tn();Un=Tf});function Nf(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function Mn(e,t,r){function n(o,s,i,a){if(typeof o=="string"&&(o=Nf(o)),typeof s=="string"&&(s=Un(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(s),c.set(o,s.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){a=a||0;for(let d=0;d<16;++d)i[a+d]=c[d];return i}return Ye(c)}try{n.name=e}catch{}return n.DNS=Pf,n.URL=Of,n}var Pf,Of,cs=V(()=>{rn();as();Pf="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Of="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Df(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Qi.default.createHash("md5").update(e).digest()}var Qi,Zi,ea=V(()=>{Qi=Ke(require("crypto"));Zi=Df});var kf,ta,ra=V(()=>{cs();ea();kf=Mn("v3",48,Zi),ta=kf});function zf(e,t,r){e=e||{};let n=e.random||(e.rng||en)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return Ye(n)}var $n,na=V(()=>{ns();rn();$n=zf});function Lf(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),oa.default.createHash("sha1").update(e).digest()}var oa,sa,ia=V(()=>{oa=Ke(require("crypto"));sa=Lf});var Ff,aa,ca=V(()=>{cs();ia();Ff=Mn("v5",80,sa),aa=Ff});var da,la=V(()=>{da="00000000-0000-0000-0000-000000000000"});function Uf(e){if(!Je(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var ua,pa=V(()=>{tn();ua=Uf});var ma={};kn(ma,{NIL:()=>da,parse:()=>Un,stringify:()=>Ye,v1:()=>Yi,v3:()=>ta,v4:()=>$n,v5:()=>aa,validate:()=>Je,version:()=>ua});var ds=V(()=>{Xi();ra();na();ca();la();pa();tn();rn();as()});var ya=I(te=>{"use strict";var Mf=te&&te.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$f=te&&te.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ga=te&&te.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Mf(t,e,r);return $f(t,e),t};Object.defineProperty(te,"__esModule",{value:!0});te.prepareKeyValueMessage=te.issueFileCommand=void 0;var fa=ga(require("fs")),ls=ga(require("os")),qf=(ds(),qi(ma)),ha=zn();function jf(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!fa.existsSync(r))throw new Error(`Missing file at path: ${r}`);fa.appendFileSync(r,`${ha.toCommandValue(t)}${ls.EOL}`,{encoding:"utf8"})}te.issueFileCommand=jf;function Vf(e,t){let r=`ghadelimiter_${qf.v4()}`,n=ha.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${ls.EOL}${n}${ls.EOL}${r}`}te.prepareKeyValueMessage=Vf});var Ea=I(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.checkBypass=Yt.getProxyUrl=void 0;function Bf(e){let t=e.protocol==="https:";if(wa(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}Yt.getProxyUrl=Bf;function wa(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let o of t.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(n.some(s=>s===o))return!0;return!1}Yt.checkBypass=wa});var xa=I(Xt=>{"use strict";var RA=require("net"),Hf=require("tls"),us=require("http"),Sa=require("https"),Gf=require("events"),vA=require("assert"),Wf=require("util");Xt.httpOverHttp=Kf;Xt.httpsOverHttp=Jf;Xt.httpOverHttps=Yf;Xt.httpsOverHttps=Xf;function Kf(e){var t=new ze(e);return t.request=us.request,t}function Jf(e){var t=new ze(e);return t.request=us.request,t.createSocket=Ca,t.defaultPort=443,t}function Yf(e){var t=new ze(e);return t.request=Sa.request,t}function Xf(e){var t=new ze(e);return t.request=Sa.request,t.createSocket=Ca,t.defaultPort=443,t}function ze(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||us.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,o,s,i){for(var a=Aa(o,s,i),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===a.host&&l.port===a.port){t.requests.splice(c,1),l.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}Wf.inherits(ze,Gf.EventEmitter);ze.prototype.addRequest=function(t,r,n,o){var s=this,i=ps({request:t},s.options,Aa(r,n,o));if(s.sockets.length>=this.maxSockets){s.requests.push(i);return}s.createSocket(i,function(a){a.on("free",c),a.on("close",d),a.on("agentRemove",d),t.onSocket(a);function c(){s.emit("free",a,i)}function d(l){s.removeSocket(a),a.removeListener("free",c),a.removeListener("close",d),a.removeListener("agentRemove",d)}})};ze.prototype.createSocket=function(t,r){var n=this,o={};n.sockets.push(o);var s=ps({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),Xe("making CONNECT request");var i=n.request(s);i.useChunkedEncodingByDefault=!1,i.once("response",a),i.once("upgrade",c),i.once("connect",d),i.once("error",l),i.end();function a(u){u.upgrade=!0}function c(u,p,f){process.nextTick(function(){d(u,p,f)})}function d(u,p,f){if(i.removeAllListeners(),p.removeAllListeners(),u.statusCode!==200){Xe("tunneling socket could not be established, statusCode=%d",u.statusCode),p.destroy();var g=new Error("tunneling socket could not be established, statusCode="+u.statusCode);g.code="ECONNRESET",t.request.emit("error",g),n.removeSocket(o);return}if(f.length>0){Xe("got illegal response body from proxy"),p.destroy();var g=new Error("got illegal response body from proxy");g.code="ECONNRESET",t.request.emit("error",g),n.removeSocket(o);return}return Xe("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=p,r(p)}function l(u){i.removeAllListeners(),Xe(`tunneling socket could not be established, cause=%s
`,u.message,u.stack);var p=new Error("tunneling socket could not be established, cause="+u.message);p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(o)}};ze.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(o){n.request.onSocket(o)})}};function Ca(e,t){var r=this;ze.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),s=ps({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),i=Hf.connect(0,s);r.sockets[r.sockets.indexOf(n)]=i,t(i)})}function Aa(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function ps(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var o=Object.keys(n),s=0,i=o.length;s<i;++s){var a=o[s];n[a]!==void 0&&(e[a]=n[a])}}return e}var Xe;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?Xe=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:Xe=function(){};Xt.debug=Xe});var Ra=I((bA,_a)=>{_a.exports=xa()});var Ia=I(_=>{"use strict";var Qf=_&&_.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Zf=_&&_.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Hn=_&&_.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Qf(t,e,r);return Zf(t,e),t},k=_&&_.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(_,"__esModule",{value:!0});_.HttpClient=_.isHttps=_.HttpClientResponse=_.HttpClientError=_.getProxyUrl=_.MediaTypes=_.Headers=_.HttpCodes=void 0;var qn=Hn(require("http")),ms=Hn(require("https")),va=Hn(Ea()),jn=Hn(Ra()),fe;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(fe=_.HttpCodes||(_.HttpCodes={}));var B;(function(e){e.Accept="accept",e.ContentType="content-type"})(B=_.Headers||(_.Headers={}));var Qe;(function(e){e.ApplicationJson="application/json"})(Qe=_.MediaTypes||(_.MediaTypes={}));function eg(e){let t=va.getProxyUrl(new URL(e));return t?t.href:""}_.getProxyUrl=eg;var tg=[fe.MovedPermanently,fe.ResourceMoved,fe.SeeOther,fe.TemporaryRedirect,fe.PermanentRedirect],rg=[fe.BadGateway,fe.ServiceUnavailable,fe.GatewayTimeout],ng=["OPTIONS","GET","DELETE","HEAD"],og=10,sg=5,Qt=class extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,Qt.prototype)}};_.HttpClientError=Qt;var Bn=class{constructor(t){this.message=t}readBody(){return k(this,void 0,void 0,function*(){return new Promise(t=>k(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};_.HttpClientResponse=Bn;function ig(e){return new URL(e).protocol==="https:"}_.isHttps=ig;var fs=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return k(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return k(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return k(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return k(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return k(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return k(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return k(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,o){return k(this,void 0,void 0,function*(){return this.request(t,r,n,o)})}getJson(t,r={}){return k(this,void 0,void 0,function*(){r[B.Accept]=this._getExistingOrDefaultHeader(r,B.Accept,Qe.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return k(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[B.Accept]=this._getExistingOrDefaultHeader(n,B.Accept,Qe.ApplicationJson),n[B.ContentType]=this._getExistingOrDefaultHeader(n,B.ContentType,Qe.ApplicationJson);let s=yield this.post(t,o,n);return this._processResponse(s,this.requestOptions)})}putJson(t,r,n={}){return k(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[B.Accept]=this._getExistingOrDefaultHeader(n,B.Accept,Qe.ApplicationJson),n[B.ContentType]=this._getExistingOrDefaultHeader(n,B.ContentType,Qe.ApplicationJson);let s=yield this.put(t,o,n);return this._processResponse(s,this.requestOptions)})}patchJson(t,r,n={}){return k(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[B.Accept]=this._getExistingOrDefaultHeader(n,B.Accept,Qe.ApplicationJson),n[B.ContentType]=this._getExistingOrDefaultHeader(n,B.ContentType,Qe.ApplicationJson);let s=yield this.patch(t,o,n);return this._processResponse(s,this.requestOptions)})}request(t,r,n,o){return k(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),i=this._prepareRequest(t,s,o),a=this._allowRetries&&ng.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(i,n),d&&d.message&&d.message.statusCode===fe.Unauthorized){let u;for(let p of this.handlers)if(p.canHandleAuthentication(d)){u=p;break}return u?u.handleAuthentication(this,i,n):d}let l=this._maxRedirects;for(;d.message.statusCode&&tg.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let u=d.message.headers.location;if(!u)break;let p=new URL(u);if(s.protocol==="https:"&&s.protocol!==p.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),p.hostname!==s.hostname)for(let f in o)f.toLowerCase()==="authorization"&&delete o[f];i=this._prepareRequest(t,p,o),d=yield this.requestRaw(i,n),l--}if(!d.message.statusCode||!rg.includes(d.message.statusCode))return d;c+=1,c<a&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<a);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return k(this,void 0,void 0,function*(){return new Promise((n,o)=>{function s(i,a){i?o(i):a?n(a):o(new Error("Unknown error"))}this.requestRawWithCallback(t,r,s)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let o=!1;function s(c,d){o||(o=!0,n(c,d))}let i=t.httpModule.request(t.options,c=>{let d=new Bn(c);s(void 0,d)}),a;i.on("socket",c=>{a=c}),i.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),s(new Error(`Request timeout: ${t.options.path}`))}),i.on("error",function(c){s(c)}),r&&typeof r=="string"&&i.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){i.end()}),r.pipe(i)):i.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let o={};o.parsedUrl=r;let s=o.parsedUrl.protocol==="https:";o.httpModule=s?ms:qn;let i=s?443:80;if(o.options={},o.options.host=o.parsedUrl.hostname,o.options.port=o.parsedUrl.port?parseInt(o.parsedUrl.port):i,o.options.path=(o.parsedUrl.pathname||"")+(o.parsedUrl.search||""),o.options.method=t,o.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(o.options.headers["user-agent"]=this.userAgent),o.options.agent=this._getAgent(o.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(o.options);return o}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Vn(this.requestOptions.headers),Vn(t||{})):Vn(t||{})}_getExistingOrDefaultHeader(t,r,n){let o;return this.requestOptions&&this.requestOptions.headers&&(o=Vn(this.requestOptions.headers)[r]),t[r]||o||n}_getAgent(t){let r,n=va.getProxyUrl(t),o=n&&n.hostname;if(this._keepAlive&&o&&(r=this._proxyAgent),this._keepAlive&&!o&&(r=this._agent),r)return r;let s=t.protocol==="https:",i=100;if(this.requestOptions&&(i=this.requestOptions.maxSockets||qn.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},c,d=n.protocol==="https:";s?c=d?jn.httpsOverHttps:jn.httpsOverHttp:c=d?jn.httpOverHttps:jn.httpOverHttp,r=c(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:i};r=s?new ms.Agent(a):new qn.Agent(a),this._agent=r}return r||(r=s?ms.globalAgent:qn.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return k(this,void 0,void 0,function*(){t=Math.min(og,t);let r=sg*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return k(this,void 0,void 0,function*(){return new Promise((n,o)=>k(this,void 0,void 0,function*(){let s=t.message.statusCode||0,i={statusCode:s,result:null,headers:{}};s===fe.NotFound&&n(i);function a(l,u){if(typeof u=="string"){let p=new Date(u);if(!isNaN(p.valueOf()))return p}return u}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(r&&r.deserializeDates?c=JSON.parse(d,a):c=JSON.parse(d),i.result=c),i.headers=t.message.headers}catch{}if(s>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${s})`;let u=new Qt(l,s);u.result=i.result,o(u)}else n(i)}))})}};_.HttpClient=fs;var Vn=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var ba=I(ye=>{"use strict";var ws=ye&&ye.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(ye,"__esModule",{value:!0});ye.PersonalAccessTokenCredentialHandler=ye.BearerCredentialHandler=ye.BasicCredentialHandler=void 0;var gs=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return ws(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ye.BasicCredentialHandler=gs;var hs=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return ws(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ye.BearerCredentialHandler=hs;var ys=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return ws(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ye.PersonalAccessTokenCredentialHandler=ys});var Pa=I(Zt=>{"use strict";var Ta=Zt&&Zt.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.OidcClient=void 0;var ag=Ia(),cg=ba(),Na=er(),Ze=class{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new ag.HttpClient("actions/oidc-client",[new cg.BearerCredentialHandler(Ze.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return Ta(this,void 0,void 0,function*(){let s=(r=(yield Ze.createHttpClient().getJson(t).catch(i=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${i.statusCode}
 
        Error Message: ${i.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return Ta(this,void 0,void 0,function*(){try{let r=Ze.getIDTokenUrl();if(t){let o=encodeURIComponent(t);r=`${r}&audience=${o}`}Na.debug(`ID token url is ${r}`);let n=yield Ze.getCall(r);return Na.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};Zt.OidcClient=Ze});var As=I(W=>{"use strict";var Es=W&&W.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(W,"__esModule",{value:!0});W.summary=W.markdownSummary=W.SUMMARY_DOCS_URL=W.SUMMARY_ENV_VAR=void 0;var dg=require("os"),Ss=require("fs"),{access:lg,appendFile:ug,writeFile:pg}=Ss.promises;W.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";W.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Cs=class{constructor(){this._buffer=""}filePath(){return Es(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[W.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${W.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield lg(t,Ss.constants.R_OK|Ss.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let o=Object.entries(n).map(([s,i])=>` ${s}="${i}"`).join("");return r?`<${t}${o}>${r}</${t}>`:`<${t}${o}>`}write(t){return Es(this,void 0,void 0,function*(){let r=!!(t!=null&&t.overwrite),n=yield this.filePath();return yield(r?pg:ug)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Es(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(dg.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),o=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(o).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",o=t.map(i=>this.wrap("li",i)).join(""),s=this.wrap(n,o);return this.addRaw(s).addEOL()}addTable(t){let r=t.map(o=>{let s=o.map(i=>{if(typeof i=="string")return this.wrap("td",i);let{header:a,data:c,colspan:d,rowspan:l}=i,u=a?"th":"td",p=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(u,c,p)}).join("");return this.wrap("tr",s)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:o,height:s}=n||{},i=Object.assign(Object.assign({},o&&{width:o}),s&&{height:s}),a=this.wrap("img",null,Object.assign({src:t,alt:r},i));return this.addRaw(a).addEOL()}addHeading(t,r){let n=`h${r}`,o=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",s=this.wrap(o,t);return this.addRaw(s).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),o=this.wrap("blockquote",t,n);return this.addRaw(o).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},Oa=new Cs;W.markdownSummary=Oa;W.summary=Oa});var Da=I(K=>{"use strict";var mg=K&&K.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),fg=K&&K.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),gg=K&&K.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&mg(t,e,r);return fg(t,e),t};Object.defineProperty(K,"__esModule",{value:!0});K.toPlatformPath=K.toWin32Path=K.toPosixPath=void 0;var hg=gg(require("path"));function yg(e){return e.replace(/[\\]/g,"/")}K.toPosixPath=yg;function wg(e){return e.replace(/[/]/g,"\\")}K.toWin32Path=wg;function Eg(e){return e.replace(/[/\\]/g,hg.sep)}K.toPlatformPath=Eg});var er=I(y=>{"use strict";var Sg=y&&y.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Cg=y&&y.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ka=y&&y.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Sg(t,e,r);return Cg(t,e),t},za=y&&y.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.getIDToken=y.getState=y.saveState=y.group=y.endGroup=y.startGroup=y.info=y.notice=y.warning=y.error=y.debug=y.isDebug=y.setFailed=y.setCommandEcho=y.setOutput=y.getBooleanInput=y.getMultilineInput=y.getInput=y.addPath=y.setSecret=y.exportVariable=y.ExitCode=void 0;var re=Hi(),Ft=ya(),tr=zn(),La=ka(require("os")),Ag=ka(require("path")),xg=Pa(),Fa;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Fa=y.ExitCode||(y.ExitCode={}));function _g(e,t){let r=tr.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return Ft.issueFileCommand("ENV",Ft.prepareKeyValueMessage(e,t));re.issueCommand("set-env",{name:e},r)}y.exportVariable=_g;function Rg(e){re.issueCommand("add-mask",{},e)}y.setSecret=Rg;function vg(e){process.env.GITHUB_PATH||""?Ft.issueFileCommand("PATH",e):re.issueCommand("add-path",{},e),process.env.PATH=`${e}${Ag.delimiter}${process.env.PATH}`}y.addPath=vg;function xs(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}y.getInput=xs;function Ig(e,t){let r=xs(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}y.getMultilineInput=Ig;function bg(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],o=xs(e,t);if(r.includes(o))return!0;if(n.includes(o))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}y.getBooleanInput=bg;function Tg(e,t){if(process.env.GITHUB_OUTPUT||"")return Ft.issueFileCommand("OUTPUT",Ft.prepareKeyValueMessage(e,t));process.stdout.write(La.EOL),re.issueCommand("set-output",{name:e},tr.toCommandValue(t))}y.setOutput=Tg;function Ng(e){re.issue("echo",e?"on":"off")}y.setCommandEcho=Ng;function Pg(e){process.exitCode=Fa.Failure,Ua(e)}y.setFailed=Pg;function Og(){return process.env.RUNNER_DEBUG==="1"}y.isDebug=Og;function Dg(e){re.issueCommand("debug",{},e)}y.debug=Dg;function Ua(e,t={}){re.issueCommand("error",tr.toCommandProperties(t),e instanceof Error?e.toString():e)}y.error=Ua;function kg(e,t={}){re.issueCommand("warning",tr.toCommandProperties(t),e instanceof Error?e.toString():e)}y.warning=kg;function zg(e,t={}){re.issueCommand("notice",tr.toCommandProperties(t),e instanceof Error?e.toString():e)}y.notice=zg;function Lg(e){process.stdout.write(e+La.EOL)}y.info=Lg;function Ma(e){re.issue("group",e)}y.startGroup=Ma;function $a(){re.issue("endgroup")}y.endGroup=$a;function Fg(e,t){return za(this,void 0,void 0,function*(){Ma(e);let r;try{r=yield t()}finally{$a()}return r})}y.group=Fg;function Ug(e,t){if(process.env.GITHUB_STATE||"")return Ft.issueFileCommand("STATE",Ft.prepareKeyValueMessage(e,t));re.issueCommand("save-state",{name:e},tr.toCommandValue(t))}y.saveState=Ug;function Mg(e){return process.env[`STATE_${e}`]||""}y.getState=Mg;function $g(e){return za(this,void 0,void 0,function*(){return yield xg.OidcClient.getIDToken(e)})}y.getIDToken=$g;var qg=As();Object.defineProperty(y,"summary",{enumerable:!0,get:function(){return qg.summary}});var jg=As();Object.defineProperty(y,"markdownSummary",{enumerable:!0,get:function(){return jg.markdownSummary}});var _s=Da();Object.defineProperty(y,"toPosixPath",{enumerable:!0,get:function(){return _s.toPosixPath}});Object.defineProperty(y,"toWin32Path",{enumerable:!0,get:function(){return _s.toWin32Path}});Object.defineProperty(y,"toPlatformPath",{enumerable:!0,get:function(){return _s.toPlatformPath}})});var Hs=I(Ue=>{"use strict";var Zc=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Gh=Zc+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",ed="["+Zc+"]["+Gh+"]*",Wh=new RegExp("^"+ed+"$"),Kh=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r},Jh=function(e){let t=Wh.exec(e);return!(t===null||typeof t>"u")};Ue.isExist=function(e){return typeof e<"u"};Ue.isEmptyObject=function(e){return Object.keys(e).length===0};Ue.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};Ue.getValue=function(e){return Ue.isExist(e)?e:""};Ue.isName=Jh;Ue.getAllMatches=Kh;Ue.nameRegexp=ed});var Ws=I(sd=>{"use strict";var Gs=Hs(),Yh={allowBooleanAttributes:!1,unpairedTags:[]};sd.validate=function(e,t){t=Object.assign({},Yh,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=rd(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=nd(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!oy(c)){let u;return c.trim().length===0?u="Invalid space after '<'.":u="Tag '"+c+"' is an invalid name.",O("InvalidTag",u,Q(e,s))}let d=Zh(e,s);if(d===!1)return O("InvalidAttr","Attributes for '"+c+"' have open quote.",Q(e,s));let l=d.value;if(s=d.index,l[l.length-1]==="/"){let u=s-l.length;l=l.substring(0,l.length-1);let p=od(l,t);if(p===!0)n=!0;else return O(p.err.code,p.err.msg,Q(e,u+p.err.line))}else if(a)if(d.tagClosed){if(l.trim().length>0)return O("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",Q(e,i));{let u=r.pop();if(c!==u.tagName){let p=Q(e,u.tagStartPos);return O("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",Q(e,i))}r.length==0&&(o=!0)}}else return O("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",Q(e,s));else{let u=od(l,t);if(u!==!0)return O(u.err.code,u.err.msg,Q(e,s-l.length+u.err.line));if(o===!0)return O("InvalidXml","Multiple possible root nodes found.",Q(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=nd(e,s);continue}else if(e[s+1]==="?"){if(s=rd(e,++s),s.err)return s}else break;else if(e[s]==="&"){let u=ry(e,s);if(u==-1)return O("InvalidChar","char '&' is not expected.",Q(e,s));s=u}else if(o===!0&&!td(e[s]))return O("InvalidXml","Extra text at the end",Q(e,s));e[s]==="<"&&s--}}else{if(td(e[s]))continue;return O("InvalidChar","char '"+e[s]+"' is not expected.",Q(e,s))}if(n){if(r.length==1)return O("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Q(e,r[0].tagStartPos));if(r.length>0)return O("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return O("InvalidXml","Start tag expected.",1);return!0};function td(e){return e===" "||e==="	"||e===`
`||e==="\r"}function rd(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return O("InvalidXml","XML declaration allowed only at the start of the document.",Q(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function nd(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var Xh='"',Qh="'";function Zh(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===Xh||e[t]===Qh)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var ey=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function od(e,t){let r=Gs.getAllMatches(e,ey),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return O("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",un(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return O("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",un(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return O("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",un(r[o]));let s=r[o][2];if(!ny(s))return O("InvalidAttr","Attribute '"+s+"' is an invalid name.",un(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return O("InvalidAttr","Attribute '"+s+"' is repeated.",un(r[o]))}return!0}function ty(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function ry(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,ty(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function O(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function ny(e){return Gs.isName(e)}function oy(e){return Gs.isName(e)}function Q(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function un(e){return e.startIndex+e[1].length}});var ad=I(Ks=>{var id={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1},sy=function(e){return Object.assign({},id,e)};Ks.buildOptions=sy;Ks.defaultOptions=id});var dd=I((Ub,cd)=>{"use strict";var Js=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){this.child.push({[t]:r})}addChild(t){t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}};cd.exports=Js});var ud=I((Mb,ld)=>{function iy(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i=!1,a="";for(;t<e.length;t++)if(e[t]==="<"){if(o&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y")t+=7,s=!0;else if(o&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T")t+=8;else if(o&&e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T")t+=8;else if(o&&e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N")t+=9;else if(e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-")i=!0;else throw new Error("Invalid DOCTYPE");n++,a=""}else if(e[t]===">"){if(i)if(e[t-1]==="-"&&e[t-2]==="-")i=!1;else throw new Error("Invalid XML comment in DOCTYPE");else s&&(cy(a,r),s=!1);if(n--,n===0)break}else e[t]==="["?o=!0:a+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}var ay=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function cy(e,t){let r=ay.exec(e);r&&(t[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}ld.exports=iy});var md=I(($b,pd)=>{var dy=/^[-+]?0x[a-fA-F0-9]+$/,ly=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var uy={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function py(e,t={}){if(t=Object.assign({},uy,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&dy.test(r))return Number.parseInt(r,16);{let n=ly.exec(r);if(n){let o=n[1],s=n[2],i=my(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?d==="0"&&i===""||d===i||o&&d==="-"+i?c:e:s?i===d||o+i===d?c:e:r===d||r===o+d?c:e}}else return e}}function my(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}pd.exports=py});var gd=I((jb,fd)=>{"use strict";var Zs=Hs(),pn=dd(),fy=ud(),gy=md(),qb="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Zs.nameRegexp),Ys=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=hy,this.parseXml=Cy,this.parseTextData=yy,this.resolveNameSpace=wy,this.buildAttributesMap=Sy,this.isItStopNode=_y,this.replaceEntitiesValue=Ay,this.readStopNodeData=vy,this.saveTextToParentTag=xy}};function hy(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function yy(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?Qs(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Qs(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function wy(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var Ey=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Sy(e,t){if(!this.options.ignoreAttributes&&typeof e=="string"){let r=Zs.getAllMatches(e,Ey),n=r.length,o={};for(let s=0;s<n;s++){let i=this.resolveNameSpace(r[s][1]),a=r[s][4],c=this.options.attributeNamePrefix+i;if(i.length)if(a!==void 0){this.options.trimValues&&(a=a.trim()),a=this.replaceEntitiesValue(a);let d=this.options.attributeValueProcessor(i,a,t);d==null?o[c]=a:typeof d!=typeof a||d!==a?o[c]=d:o[c]=Qs(a,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[c]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=o,s}return o}}var Cy=function(e){e=e.replace(/\r\n?/g,`
`);let t=new pn("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=Mt(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let d=c.indexOf(":");d!==-1&&(c=c.substr(d+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o)),o=o.substr(0,o.lastIndexOf(".")),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=Xs(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new pn(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o)),r.addChild(c)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=Mt(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=fy(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=Mt(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,r.tagname,o,!0,!1,!0);d==null&&(d=""),r.add(this.options.textNodeName,d)}s=a+2}else{let a=Xs(e,s,this.options.removeNSPrefix),c=a.tagName,d=a.tagExp,l=a.attrExpPresent,u=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1)),c!==t.tagname&&(o+=o?"."+c:c);let p=r;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(r=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,o,c)){let f="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let h=this.readStopNodeData(e,c,u+1);if(!h)throw new Error(`Unexpected end of ${c}`);s=h.i,f=h.tagContent}let g=new pn(c);c!==d&&l&&(g[":@"]=this.buildAttributesMap(d,o)),f&&(f=this.parseTextData(f,c,o,!0,l,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),g.add(this.options.textNodeName,f),r.addChild(g)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let f=new pn(c);c!==d&&l&&(f[":@"]=this.buildAttributesMap(d,o)),o=o.substr(0,o.lastIndexOf(".")),r.addChild(f)}else{let f=new pn(c);this.tagsNodeStack.push(r),c!==d&&l&&(f[":@"]=this.buildAttributesMap(d,o)),r.addChild(f),r=f}n="",s=u}}else n+=e[s];return t.child},Ay=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function xy(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function _y(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function Ry(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function Mt(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function Xs(e,t,r,n=">"){let o=Ry(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),c=s,d=!0;if(a!==-1&&(c=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==o.data.substr(l+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:d}}function vy(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=Mt(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=Mt(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Mt(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Mt(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Xs(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function Qs(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:gy(e,r)}else return Zs.isExist(e)?e:""}fd.exports=Ys});var wd=I(yd=>{"use strict";function Iy(e,t){return hd(e,t)}function hd(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=by(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=hd(i[a],t,c),l=Ny(d,t);i[":@"]?Ty(d,i[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,c,l)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function by(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Ty(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Ny(e,t){let r=Object.keys(e).length;return!!(r===0||r===1&&e[t.textNodeName])}yd.prettify=Iy});var Sd=I((Bb,Ed)=>{var{buildOptions:Py}=ad(),Oy=gd(),{prettify:Dy}=wd(),ky=Ws(),ei=class{constructor(t){this.externalEntities={},this.options=Py(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=ky.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new Oy(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:Dy(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};Ed.exports=ei});var Rd=I((Hb,_d)=>{var zy=`
`;function Ly(e,t){return Ad(e,t,"",0)}function Ad(e,t,r,n){let o="",s="";t.format&&t.indentBy.length>0&&(s=zy+""+t.indentBy.repeat(n));for(let i=0;i<e.length;i++){let a=e[i],c=Fy(a),d="";if(r.length===0?d=c:d=`${r}.${c}`,c===t.textNodeName){let f=a[c];Uy(d,t)||(f=t.tagValueProcessor(c,f),f=xd(f,t)),o+=s+f;continue}else if(c===t.cdataPropName){o+=s+`<![CDATA[${a[c][0][t.textNodeName]}]]>`;continue}else if(c===t.commentPropName){o+=s+`<!--${a[c][0][t.textNodeName]}-->`;continue}else if(c[0]==="?"){let f=Cd(a[":@"],t),g=c==="?xml"?"":s,h=a[c][0][t.textNodeName];h=h.length!==0?" "+h:"",o+=g+`<${c}${h}${f}?>`;continue}let l=Cd(a[":@"],t),u=s+`<${c}${l}`,p=Ad(a[c],t,d,n+1);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?o+=u+">":o+=u+"/>":(!p||p.length===0)&&t.suppressEmptyNode?o+=u+"/>":o+=u+`>${p}${s}</${c}>`}return o}function Fy(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Cd(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let o=t.attributeValueProcessor(n,e[n]);o=xd(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function Uy(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function xd(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}_d.exports=Ly});var Td=I((Gb,bd)=>{"use strict";var My=Rd(),$y={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],transformTagName:!1};function ti(e){this.options=Object.assign({},$y,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Wy),this.processTextOrObjNode=jy,this.options.format?(this.indentate=Gy,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=Hy,this.buildObjNode=Vy):(this.buildTextNode=Id,this.buildObjNode=vd),this.buildTextValNode=Id,this.buildObjectNode=vd,this.replaceEntitiesValue=By,this.buildAttrPairStr=qy}ti.prototype.build=function(e){return this.options.preserveOrder?My(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};ti.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(!(typeof e[o]>"u"))if(e[o]===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let i=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length;for(let i=0;i<s;i++){let a=e[o][i];typeof a>"u"||(a===null?o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:typeof a=="object"?n+=this.processTextOrObjNode(a,o,t):n+=this.buildTextNode(a,o,"",t))}}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),i=s.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(s[a],""+e[o][s[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};function qy(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'}function jy(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjNode(n.val,t,n.attrStr,r)}function vd(e,t,r,n){let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}function Vy(e,t,r,n){return e!==""?this.buildObjectNode(e,t,r,n):t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function Id(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""&&this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode?this.indentate(n)+"<"+t+this.tagEndChar:this.indentate(n)+"<"+t+"/"+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}}function By(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e}function Hy(e,t,r,n){return e===""&&this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode?this.indentate(n)+"<"+t+this.tagEndChar:this.indentate(n)+"<"+t+"/"+this.tagEndChar:e!==""?this.buildTextValNode(e,t,r,n):t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function Gy(e){return this.options.indentBy.repeat(e)}function Wy(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}bd.exports=ti});var Pd=I((Wb,Nd)=>{"use strict";var Ky=Ws(),Jy=Sd(),Yy=Td();Nd.exports={XMLParser:Jy,XMLValidator:Ky,XMLBuilder:Yy}});var LC={};kn(LC,{run:()=>df});module.exports=qi(LC);var pe=Ke(er());var et;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(et||(et={}));var rr=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var Vg="AWS_USE_DUALSTACK_ENDPOINT",Bg="use_dualstack_endpoint";var tt={environmentVariableSelector:e=>rr(e,Vg,et.ENV),configFileSelector:e=>rr(e,Bg,et.CONFIG),default:!1};var Hg="AWS_USE_FIPS_ENDPOINT",Gg="use_fips_endpoint";var rt={environmentVariableSelector:e=>rr(e,Hg,et.ENV),configFileSelector:e=>rr(e,Gg,et.CONFIG),default:!1};var U=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Wg="AWS_REGION",Kg="region",we={environmentVariableSelector:e=>e[Wg],configFileSelector:e=>e[Kg],default:()=>{throw new Error("Region is missing")}},nt={preferredFile:"credentials"};var Gn=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Rs=e=>Gn(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var ot=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Rs(t);let n=await t();return Rs(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return Gn(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var R=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/"}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new R({...this,headers:{...this.headers}});return t.query&&(t.query=Jg(t.query)),t}};function Jg(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Ee=class{constructor(t){this.statusCode=t.statusCode,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var qa="content-length";function Yg(e){return t=>async r=>{let n=r.request;if(R.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(qa)===-1)try{let i=e(o);n.headers={...n.headers,[qa]:String(i)}}catch{}}return t({...r,request:n})}}var Xg={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},st=e=>({applyToStack:t=>{t.add(Yg(e.bodyLengthChecker),Xg)}});var ja=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),rh(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!th(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Qg=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Zg=/(\d+\.){3}\d+/,eh=/\.\./;var th=e=>Qg.test(e)&&!Zg.test(e)&&!eh.test(e),rh=e=>{let[t,r,n,o,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!i};var Va=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n};var Ba=async(e,t,r,n)=>{let o=await nh(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},nh=async(e,t,r)=>{var s;let n={},o=((s=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:s.call(t))||{};for(let[i,a]of Object.entries(o))switch(a.type){case"staticContextParams":n[i]=a.value;break;case"contextParams":n[i]=e[a.name];break;case"clientContextParams":case"builtInParams":n[i]=await Va(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await ja(n),n};function Ha(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var J=e=>{if(typeof e=="string")return J(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=Ha(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};var Ga=e=>typeof e=="object"?"url"in e?J(e.url):e:J(e);var Wa=({config:e,instructions:t})=>(r,n)=>async o=>{var a,c;let s=await Ba(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=(a=s.properties)==null?void 0:a.authSchemes;let i=(c=n.authSchemes)==null?void 0:c[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...o})};var Ka=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){throw Object.defineProperty(i,"$response",{value:s}),i}};var Ja=(e,t)=>(r,n)=>async o=>{var a;let s=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(o.input,{...e,endpoint:s});return r({...o,request:i})};var oh={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},vs={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function N(e,t,r){return{applyToStack:n=>{n.add(Ka(e,r),oh),n.add(Ja(e,t),vs)}}}var sh={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:vs.name},P=(e,t)=>({applyToStack:r=>{r.addRelativeTo(Wa({config:e,instructions:t}),sh)}});var it=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>Ga(await U(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:U(e.useDualstackEndpoint??!1),useFipsEndpoint:U(e.useFipsEndpoint??!1)}};var ih=e=>t=>async r=>{if(!R.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};return o.indexOf("h2")>=0&&!n.headers[":authority"]?(delete n.headers.host,n.headers[":authority"]=""):n.headers.host||(n.headers.host=n.hostname),t(r)},ah={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},at=e=>({applyToStack:t=>{t.add(ih(e),ah)}});var ch=()=>(e,t)=>async r=>{let n=await e(r),{clientName:o,commandName:s,logger:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:u}=d;if(!i)return n;if(typeof i.info=="function"){let{$metadata:p,...f}=n.output;i.info({clientName:o,commandName:s,input:(l??a)(r.input),output:(u??c)(f),metadata:p})}return n},dh={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},ct=e=>({applyToStack:t=>{t.add(ch(),dh)}});var Ya="X-Amzn-Trace-Id",lh="AWS_LAMBDA_FUNCTION_NAME",uh="_X_AMZN_TRACE_ID",ph=e=>t=>async r=>{let{request:n}=r;if(!R.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Ya))return t(r);let o=process.env[lh],s=process.env[uh],i=a=>typeof a=="string"&&a.length>0;return i(o)&&i(s)&&(n.headers[Ya]=s),t({...r,request:n})},mh={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},dt=e=>({applyToStack:t=>{t.add(ph(e),mh)}});var Se;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Se||(Se={}));var Ut=3,Ce="STANDARD";var Xa=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Qa=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Za=[500,502,503,504],ec=["ECONNRESET","EPIPE","ETIMEDOUT"];var nr=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Xa.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},Wn=e=>{var t;return Qa.includes(e.name)||ec.includes((e==null?void 0:e.code)||"")||Za.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},tc=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Wn(e)}return!1};var nn=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),nr(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var Kn="amz-sdk-invocation-id",Jn="amz-sdk-request";var rc=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var ac=(e,t,r,n)=>{let o=e,s=(n==null?void 0:n.retryCost)??5,i=(n==null?void 0:n.timeoutRetryCost)??10,a=(n==null?void 0:n.retryBackoffStrategy)??rc(),c=e,d=Math.min(2e4,t),l,u=r??0,p=me=>me==="TRANSIENT"?i:s,f=()=>u,g=()=>d,h=()=>l,E=me=>p(me)<=c;return{getRetryCount:f,getRetryDelay:g,getLastRetryCost:h,hasRetryTokens:E,getRetryTokenCount:me=>{let es=me.errorType;if(!E(es))throw new Error("No retry token available");let ts=p(es),lf=es==="THROTTLING"?500:100;a.setDelayBase(lf);let Mi=a.computeNextBackoffDelay(u);if(me.retryAfterHint){let uf=me.retryAfterHint.getTime()-Date.now();d=Math.max(uf||0,Mi)}else d=Mi;return u++,l=ts,c-=ts,ts},releaseRetryTokens:me=>{c+=me??1,c=Math.min(c,o)}}};var sr=class{constructor(t){this.maxAttemptsProvider=t,this.mode=Se.STANDARD,this.retryToken=ac(500,100),this.maxAttemptsProvider=t}async acquireInitialRetryToken(t){return this.retryToken}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n))return t.getRetryTokenCount(r),t;throw new Error("No retry token available")}recordSuccess(t){this.retryToken.releaseRetryTokens(t.getLastRetryCost())}async getMaxAttempts(){let t;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ut}`),Ut}}shouldRetry(t,r,n){return t.getRetryCount()<n&&t.hasRetryTokens(r.errorType)&&this.isRetryableError(r.errorType)}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var Xn=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=Se.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new nn,this.standardRetryStrategy=new sr(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Is=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var dc="AWS_MAX_ATTEMPTS",lc="max_attempts",lt={environmentVariableSelector:e=>{let t=e[dc];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${dc} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[lc];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${lc} mast be a number, got "${t}"`);return r},default:Ut},ut=e=>{let{retryStrategy:t}=e,r=U(e.maxAttempts??Ut);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await U(e.retryMode)()===Se.ADAPTIVE?new Xn(r):new sr(r))}},fh="AWS_RETRY_MODE",gh="retry_mode",pt={environmentVariableSelector:e=>e[fh],configFileSelector:e=>e[gh],default:Ce};ds();var hh=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(yh(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:l}=n;for(R.isInstance(l)&&(l.headers[Kn]=$n());;)try{R.isInstance(l)&&(l.headers[Jn]=`attempt=${c+1}; max=${s}`);let{response:u,output:p}=await t(n);return o.recordSuccess(i),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=d,{response:u,output:p}}catch(u){let p=wh(u);a=Is(u);try{i=await o.refreshRetryTokenForRetry(i,p)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let f=i.getRetryDelay();d+=f,await new Promise(g=>setTimeout(g,f))}}else return o=o,o!=null&&o.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},yh=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",wh=e=>{let t={errorType:Eh(e)},r=Ch(e.$response);return r&&(t.retryAfterHint=r),t},Eh=e=>nr(e)?"THROTTLING":Wn(e)?"TRANSIENT":tc(e)?"SERVER_ERROR":"CLIENT_ERROR",Sh={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},mt=e=>({applyToStack:t=>{t.add(hh(e),Sh)}}),Ch=e=>{if(!Ee.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var Y=class extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,Y.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};var w=class extends Y{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,w.prototype)}};var X=class extends Y{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,X.prototype)}};function Qn(...e){return()=>{let t=Promise.reject(new Y("No providers in chain"));for(let r of e)t=t.catch(n=>{if(n!=null&&n.tryNextLink)return r();throw n});return t}}var uc=e=>()=>Promise.resolve(e);var ft=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),n):async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};var pc={},Ah={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),pc[e]=t,Ah[t]=e}function Le(e){let t="";for(let r=0;r<e.byteLength;r++)t+=pc[e[r]];return t}var mc="X-Amz-Algorithm",fc="X-Amz-Credential",bs="X-Amz-Date",gc="X-Amz-SignedHeaders",hc="X-Amz-Expires",Ts="X-Amz-Signature",Ns="X-Amz-Security-Token";var Ps="authorization",Os=bs.toLowerCase(),xh="date",yc=[Ps,Os,xh],wc=Ts.toLowerCase(),on="x-amz-content-sha256",Ec=Ns.toLowerCase();var Sc={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Cc=/^proxy-/,Ac=/^sec-/;var Zn="AWS4-HMAC-SHA256";var xc="AWS4-HMAC-SHA256-PAYLOAD",_c="UNSIGNED-PAYLOAD",Rc=50,Ds="aws4_request",vc=60*60*24*7;var eo={},ks=[],to=(e,t,r)=>`${e}/${t}/${r}/${Ds}`,bc=async(e,t,r,n,o)=>{let s=await Ic(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${Le(s)}:${t.sessionToken}`;if(i in eo)return eo[i];for(ks.push(i);ks.length>Rc;)delete eo[ks.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,Ds])a=await Ic(e,a,c);return eo[i]=a};var Ic=(e,t,r)=>{let n=new e(t);return n.update(r),n.digest()};var ro=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in Sc||t!=null&&t.has(s)||Cc.test(s)||Ac.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n};var Ae=e=>encodeURIComponent(e).replace(/[!'()*]/g,_h),_h=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var zs=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===wc)continue;t.push(n);let o=e[n];typeof o=="string"?r[n]=`${Ae(n)}=${Ae(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).sort().reduce((s,i)=>s.concat([`${Ae(n)}=${Ae(i)}`]),[]).join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};var no=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var sn=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===on)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||no(t)){let n=new r;return n.update(t),Le(await n.digest())}return _c};var Tc=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var oo=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?Rh(t):void 0}),Rh=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});var Ls=(e,t={})=>{var o;let{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():oo(e);for(let s of Object.keys(r)){let i=s.toLowerCase();i.slice(0,6)==="x-amz-"&&!((o=t.unhoistableHeaders)!=null&&o.has(i))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}};var so=e=>{e=typeof e.clone=="function"?e.clone():oo(e);for(let t of Object.keys(e.headers))yc.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var Nc=e=>vh(e).toISOString().replace(/\.\d{3}Z$/,"Z"),vh=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var an=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=U(n),this.credentialProvider=U(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,signingRegion:c,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let u=c??await this.regionProvider(),{longDate:p,shortDate:f}=io(n);if(o>vc)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let g=to(f,u,d??this.service),h=Ls(so(t),{unhoistableHeaders:i});l.sessionToken&&(h.query[Ns]=l.sessionToken),h.query[mc]=Zn,h.query[fc]=`${l.accessKeyId}/${g}`,h.query[bs]=p,h.query[hc]=o.toString(10);let E=ro(h,s,a);return h.query[gc]=Pc(E),h.query[Ts]=await this.getSignature(p,g,this.getSigningKey(l,u,f,d),this.createCanonicalRequest(h,E,await sn(t,this.sha256))),h}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:c,longDate:d}=io(n),l=to(c,a,i??this.service),u=await sn({headers:{},body:r},this.sha256),p=new this.sha256;p.update(t);let f=Le(await p.digest()),g=[xc,d,l,o,f,u].join(`
`);return this.signString(g,{signingDate:n,signingRegion:a,signingService:i})}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=io(r),c=new this.sha256(await this.getSigningKey(s,i,a,o));return c.update(t),Le(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s??await this.regionProvider(),d=so(t),{longDate:l,shortDate:u}=io(r),p=to(u,c,i??this.service);d.headers[Os]=l,a.sessionToken&&(d.headers[Ec]=a.sessionToken);let f=await sn(d,this.sha256);!Tc(on,d.headers)&&this.applyChecksum&&(d.headers[on]=f);let g=ro(d,o,n),h=await this.getSignature(l,p,this.getSigningKey(a,c,u,i),this.createCanonicalRequest(d,g,f));return d.headers[Ps]=`${Zn} Credential=${a.accessKeyId}/${p}, SignedHeaders=${Pc(g)}, Signature=${h}`,d}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${zs(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(n);let s=await o.digest();return`${Zn}
${t}
${r}
${Le(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))(s==null?void 0:s.length)!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o),i=new this.sha256(await n);return i.update(s),Le(await i.digest())}getSigningKey(t,r,n,o){return bc(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},io=e=>{let t=Nc(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Pc=e=>Object.keys(e).sort().join(";");var Ih=3e5,ao=e=>{let t=e.credentials?bh(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:o}=e,s;return e.signer?s=U(e.signer):e.regionInfoProvider?s=()=>U(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:c,signingService:d}=i;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},u=e.signerConstructor||an;return new u(l)}):s=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await U(e.region)(),properties:{}},i);let a=i.signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},l=e.signerConstructor||an;return new l(d)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};var bh=e=>typeof e=="function"?ft(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<Ih,t=>t.expiration!==void 0):U(e);var co=e=>new Date(Date.now()+e);var Oc=(e,t)=>Math.abs(co(t).getTime()-e)>=3e5;var Fs=(e,t)=>{let r=Date.parse(e);return Oc(r,t)?r-Date.now():t};var Th=e=>(t,r)=>async function(n){var d,l,u,p;if(!R.isInstance(n.request))return t(n);let o=(u=(l=(d=r.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:u[0],s=(o==null?void 0:o.name)==="sigv4a"?(p=o==null?void 0:o.signingRegionSet)==null?void 0:p.join(","):void 0,i=await e.signer(o),a=await t({...n,request:await i.sign(n.request,{signingDate:co(e.systemClockOffset),signingRegion:s||r.signing_region,signingService:r.signing_service})}).catch(f=>{let g=f.ServerTime??Dc(f.$response);throw g&&(e.systemClockOffset=Fs(g,e.systemClockOffset)),f}),c=Dc(a.response);return c&&(e.systemClockOffset=Fs(c,e.systemClockOffset)),a},Dc=e=>{var t,r;return Ee.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},Nh={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},lo=e=>({applyToStack:t=>{t.addRelativeTo(Th(e),Nh)}});function gt(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var Us="user-agent",uo="x-amz-user-agent",Ms=" ",kc=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;var Ph=e=>(t,r)=>async n=>{var u,p;let{request:o}=n;if(!R.isInstance(o))return t(n);let{headers:s}=o,i=((u=r==null?void 0:r.userAgent)==null?void 0:u.map($s))||[],a=(await e.defaultUserAgentProvider()).map($s),c=((p=e==null?void 0:e.customUserAgent)==null?void 0:p.map($s))||[],d=[...a,...i,...c].join(Ms),l=[...a.filter(f=>f.startsWith("aws-sdk-")),...c].join(Ms);return e.runtime!=="browser"?(l&&(s[uo]=s[uo]?`${s[Us]} ${l}`:l),s[Us]=d):s[uo]=d,t({...n,request:o})},$s=([e,t])=>{let r=e.indexOf("/"),n=e.substring(0,r),o=e.substring(r+1);return n==="api"&&(o=o.toLowerCase()),[n,o,t].filter(s=>s&&s.length>0).map(s=>s==null?void 0:s.replace(kc,"_")).join("/")},Oh={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},ht=e=>({applyToStack:t=>{t.add(Ph(e),Oh)}});var xe=class{trace(){}debug(){}info(){}warn(){}error(){}};var ir=()=>{let e=[],t=[],r=new Set,n=l=>l.sort((u,p)=>zc[p.step]-zc[u.step]||Lc[p.priority||"normal"]-Lc[u.priority||"normal"]),o=l=>{let u=!1,p=f=>f.name&&f.name===l?(u=!0,r.delete(l),!1):!0;return e=e.filter(p),t=t.filter(p),u},s=l=>{let u=!1,p=f=>f.middleware===l?(u=!0,f.name&&r.delete(f.name),!1):!0;return e=e.filter(p),t=t.filter(p),u},i=l=>(e.forEach(u=>{l.add(u.middleware,{...u})}),t.forEach(u=>{l.addRelativeTo(u.middleware,{...u})}),l),a=l=>{let u=[];return l.before.forEach(p=>{p.before.length===0&&p.after.length===0?u.push(p):u.push(...a(p))}),u.push(l),l.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?u.push(p):u.push(...a(p))}),u},c=(l=!1)=>{let u=[],p=[],f={};return e.forEach(h=>{let E={...h,before:[],after:[]};E.name&&(f[E.name]=E),u.push(E)}),t.forEach(h=>{let E={...h,before:[],after:[]};E.name&&(f[E.name]=E),p.push(E)}),p.forEach(h=>{if(h.toMiddleware){let E=f[h.toMiddleware];if(E===void 0){if(l)return;throw new Error(`${h.toMiddleware} is not found when adding ${h.name||"anonymous"} middleware ${h.relation} ${h.toMiddleware}`)}h.relation==="after"&&E.after.push(h),h.relation==="before"&&E.before.push(h)}}),n(u).map(a).reduce((h,E)=>(h.push(...E),h),[])},d={add:(l,u={})=>{let{name:p,override:f}=u,g={step:"initialize",priority:"normal",middleware:l,...u};if(p){if(r.has(p)){if(!f)throw new Error(`Duplicate middleware name '${p}'`);let h=e.findIndex(he=>he.name===p),E=e[h];if(E.step!==g.step||E.priority!==g.priority)throw new Error(`"${p}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by same-name middleware with ${g.priority} priority in ${g.step} step.`);e.splice(h,1)}r.add(p)}e.push(g)},addRelativeTo:(l,u)=>{let{name:p,override:f}=u,g={middleware:l,...u};if(p){if(r.has(p)){if(!f)throw new Error(`Duplicate middleware name '${p}'`);let h=t.findIndex(he=>he.name===p),E=t[h];if(E.toMiddleware!==g.toMiddleware||E.relation!==g.relation)throw new Error(`"${p}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by same-name middleware ${g.relation} "${g.toMiddleware}" middleware.`);t.splice(h,1)}r.add(p)}t.push(g)},clone:()=>i(ir()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?o(l):s(l),removeByTag:l=>{let u=!1,p=f=>{let{tags:g,name:h}=f;return g&&g.includes(l)?(h&&r.delete(h),u=!0,!1):!0};return e=e.filter(p),t=t.filter(p),u},concat:l=>{let u=i(ir());return u.use(l),u},applyToStack:i,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,u)=>{for(let p of c().map(f=>f.middleware).reverse())l=p(l,u);return l}};return d},zc={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Lc={high:3,normal:2,low:1};var _e=class{constructor(t){this.middlewareStack=ir(),this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var b=class{constructor(){this.middlewareStack=ir()}};var ne="***SensitiveInformation***";var fo=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&mo.warn(po(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&mo.warn(po(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},oe=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&mo.warn(po(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Dh=Math.ceil(34028234663852886e22),Fc=e=>{let t=oe(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Dh)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},go=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var Re=e=>qs(e,32),Uc=e=>qs(e,16),Mc=e=>qs(e,8),qs=(e,t)=>{let r=go(e);if(r!==void 0&&kh(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},kh=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},M=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},ho=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},m=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return mo.warn(po(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var $c=e=>oe(typeof e=="string"?cn(e):e);var qc=e=>Fc(typeof e=="string"?cn(e):e),zh=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,cn=e=>{let t=e.match(zh);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var js=e=>Re(typeof e=="string"?cn(e):e),jc=e=>Uc(typeof e=="string"?cn(e):e),Vc=e=>Mc(typeof e=="string"?cn(e):e),po=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),mo={warn:console.warn};var Lh=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var Fh=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Bc=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=Fh.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d]=t,l=jc(Hc(n)),u=dn(o,"month",1,12),p=dn(s,"day",1,31);return Uh(l,u,p,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})},HI=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),GI=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),WI=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var Fe=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=$c(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Uh=(e,t,r,n)=>{let o=t-1;return $h(e,o,r),new Date(Date.UTC(e,o,r,dn(n.hours,"hour",0,23),dn(n.minutes,"minute",0,59),dn(n.seconds,"seconds",0,60),jh(n.fractionalMilliseconds)))};var KI=50*365*24*60*60*1e3;var Mh=[31,28,31,30,31,30,31,31,30,31,30,31],$h=(e,t,r)=>{let n=Mh[t];if(t===1&&qh(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Lh[t]} in ${e}: ${r}`)},qh=e=>e%4===0&&(e%100!==0||e%400===0),dn=(e,t,r,n)=>{let o=Vc(Hc(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},jh=e=>e==null?0:qc("0."+e)*1e3,Hc=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var se=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,se.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},S=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var H=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=Vh(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t.code||t.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw S(i,t)},Vh=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var yt=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Gc=!1,wt=e=>{e&&!Gc&&parseInt(e.substring(1,e.indexOf(".")))<14&&(Gc=!0)};function yo(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Vs=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Vs(e[r]));return e};var Bs=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Bs.prototype=Object.create(String.prototype,{constructor:{value:Bs,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Bs,String);function ln(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,Bh(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}let[a,c]=s[i];if(typeof c=="function"){let d,l=a===void 0&&(d=c())!=null,u=typeof a=="function"&&!!a(void 0)||typeof a!="function"&&!!a;l?n[i]=d:u&&(n[i]=c())}else{let d=a===void 0&&c!=null,l=typeof a=="function"&&!!a(c)||typeof a!="function"&&!!a;(d||l)&&(n[i]=c)}}return n}var Bh=(e,t,r)=>ln(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{}));var Wc=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"apprunner"});var Kc={name:"@aws-sdk/client-apprunner",description:"AWS SDK for JavaScript Apprunner Client for Node.js, Browser and React Native",version:"3.245.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"(cd ../../ && yarn generate-clients -g ./codegen/sdk-codegen/aws-models/apprunner.json --keepFiles)"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"2.0.0","@aws-crypto/sha256-js":"2.0.0","@aws-sdk/client-sts":"3.245.0","@aws-sdk/config-resolver":"3.234.0","@aws-sdk/credential-provider-node":"3.245.0","@aws-sdk/fetch-http-handler":"3.226.0","@aws-sdk/hash-node":"3.226.0","@aws-sdk/invalid-dependency":"3.226.0","@aws-sdk/middleware-content-length":"3.226.0","@aws-sdk/middleware-endpoint":"3.226.0","@aws-sdk/middleware-host-header":"3.226.0","@aws-sdk/middleware-logger":"3.226.0","@aws-sdk/middleware-recursion-detection":"3.226.0","@aws-sdk/middleware-retry":"3.235.0","@aws-sdk/middleware-serde":"3.226.0","@aws-sdk/middleware-signing":"3.226.0","@aws-sdk/middleware-stack":"3.226.0","@aws-sdk/middleware-user-agent":"3.226.0","@aws-sdk/node-config-provider":"3.226.0","@aws-sdk/node-http-handler":"3.226.0","@aws-sdk/protocol-http":"3.226.0","@aws-sdk/smithy-client":"3.234.0","@aws-sdk/types":"3.226.0","@aws-sdk/url-parser":"3.226.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.234.0","@aws-sdk/util-defaults-mode-node":"3.234.0","@aws-sdk/util-endpoints":"3.245.0","@aws-sdk/util-retry":"3.229.0","@aws-sdk/util-user-agent-browser":"3.226.0","@aws-sdk/util-user-agent-node":"3.226.0","@aws-sdk/util-utf8-browser":"3.188.0","@aws-sdk/util-utf8-node":"3.208.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-apprunner",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-apprunner"}};var G=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,G.prototype)}};var ar=class extends G{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,ar.prototype)}},cr=class extends G{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,cr.prototype)}},dr=class extends G{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,dr.prototype)}},lr=class extends G{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,lr.prototype)}},ur=class extends G{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,ur.prototype)}},pr=class extends G{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,pr.prototype)}},mr=class extends G{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,mr.prototype)}};var Jc=e=>({...e});var Yc=e=>({...e});var Xc=e=>({...e}),Qc=e=>({...e});var Od=Ke(Pd());var Dd=async(e,t)=>{let r={"content-type":"application/x-www-form-urlencoded"},n;return n=Gd({...rw(e,t),Action:"AssumeRole",Version:"2011-06-15"}),Bd(t,r,"/",void 0,n)};var kd=async(e,t)=>{let r={"content-type":"application/x-www-form-urlencoded"},n;return n=Gd({...nw(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Bd(t,r,"/",void 0,n)};var zd=async(e,t)=>{if(e.statusCode>=300)return Xy(e,t);let r=await ri(e.body,t),n={};n=cw(r.AssumeRoleResult,t);let o={$metadata:Me(e),...n};return Promise.resolve(o)},Xy=async(e,t)=>{let r={...e,body:await Hd(e.body,t)},n=Wd(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Fd(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Ud(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Md(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await $d(r,t);default:let o=r.body;H({output:e,parsedBody:o.Error,exceptionCtor:G,errorCode:n})}};var Ld=async(e,t)=>{if(e.statusCode>=300)return Qy(e,t);let r=await ri(e.body,t),n={};n=dw(r.AssumeRoleWithWebIdentityResult,t);let o={$metadata:Me(e),...n};return Promise.resolve(o)},Qy=async(e,t)=>{let r={...e,body:await Hd(e.body,t)},n=Wd(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Fd(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Zy(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await ew(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await tw(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Ud(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Md(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await $d(r,t);default:let o=r.body;H({output:e,parsedBody:o.Error,exceptionCtor:G,errorCode:n})}};var Fd=async(e,t)=>{let r=e.body,n=lw(r.Error,t),o=new ar({$metadata:Me(e),...n});return S(o,r)},Zy=async(e,t)=>{let r=e.body,n=uw(r.Error,t),o=new mr({$metadata:Me(e),...n});return S(o,r)},ew=async(e,t)=>{let r=e.body,n=pw(r.Error,t),o=new ur({$metadata:Me(e),...n});return S(o,r)};var tw=async(e,t)=>{let r=e.body,n=mw(r.Error,t),o=new pr({$metadata:Me(e),...n});return S(o,r)},Ud=async(e,t)=>{let r=e.body,n=fw(r.Error,t),o=new cr({$metadata:Me(e),...n});return S(o,r)},Md=async(e,t)=>{let r=e.body,n=gw(r.Error,t),o=new dr({$metadata:Me(e),...n});return S(o,r)},$d=async(e,t)=>{let r=e.body,n=hw(r.Error,t),o=new lr({$metadata:Me(e),...n});return S(o,r)},rw=(e,t)=>{var n,o,s;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let i=qd(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([a,c])=>{let d=`PolicyArns.${a}`;r[d]=c})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let i=aw(e.Tags,t);((o=e.Tags)==null?void 0:o.length)===0&&(r.Tags=[]),Object.entries(i).forEach(([a,c])=>{let d=`Tags.${a}`;r[d]=c})}if(e.TransitiveTagKeys!=null){let i=iw(e.TransitiveTagKeys,t);((s=e.TransitiveTagKeys)==null?void 0:s.length)===0&&(r.TransitiveTagKeys=[]),Object.entries(i).forEach(([a,c])=>{let d=`TransitiveTagKeys.${a}`;r[d]=c})}return e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),r};var nw=(e,t)=>{var n;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let o=qd(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(o).forEach(([s,i])=>{let a=`PolicyArns.${s}`;r[a]=i})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r};var qd=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=ow(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},ow=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},sw=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},iw=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},aw=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=sw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},jd=(e,t)=>{let r={AssumedRoleId:void 0,Arn:void 0};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=m(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=m(e.Arn)),r},cw=(e,t)=>{let r={Credentials:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,SourceIdentity:void 0};return e.Credentials!==void 0&&(r.Credentials=Vd(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=jd(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=js(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=m(e.SourceIdentity)),r};var dw=(e,t)=>{let r={Credentials:void 0,SubjectFromWebIdentityToken:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,Provider:void 0,Audience:void 0,SourceIdentity:void 0};return e.Credentials!==void 0&&(r.Credentials=Vd(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=m(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=jd(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=js(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=m(e.Provider)),e.Audience!==void 0&&(r.Audience=m(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=m(e.SourceIdentity)),r},Vd=(e,t)=>{let r={AccessKeyId:void 0,SecretAccessKey:void 0,SessionToken:void 0,Expiration:void 0};return e.AccessKeyId!==void 0&&(r.AccessKeyId=m(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=m(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=m(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=M(Bc(e.Expiration))),r};var lw=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=m(e.message)),r};var uw=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=m(e.message)),r},pw=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=m(e.message)),r};var mw=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=m(e.message)),r},fw=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=m(e.message)),r},gw=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=m(e.message)),r},hw=(e,t)=>{let r={message:void 0};return e.message!==void 0&&(r.message=m(e.message)),r},Me=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),yw=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),ww=(e,t)=>yw(e,t).then(r=>t.utf8Encoder(r)),Bd=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new R(d)},ri=(e,t)=>ww(e,t).then(r=>{if(r.length){let n=new Od.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),Vs(a)}return{}}),Hd=async(e,t)=>{let r=await ri(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Gd=e=>Object.entries(e).map(([t,r])=>yo(t)+"="+yo(r)).join("&"),Wd=(e,t)=>{if(t.Error.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var fr=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,fr.getEndpointParameterInstructions())),this.middlewareStack.use(lo(r));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:Jc,outputFilterSensitiveLog:Yc},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Dd(t,r)}deserialize(t,r){return zd(t,r)}};var gr=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,gr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:Xc,outputFilterSensitiveLog:Qc},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return kd(t,r)}deserialize(t,r){return Ld(t,r)}};var Kd=(e,{stsClientCtor:t})=>ao({...e,stsClientCtor:t});var Jd=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var Yd={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.245.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",test:"yarn test:unit","test:unit":"jest","generate:client":"(cd ../../ && yarn generate-clients -g ./codegen/sdk-codegen/aws-models/sts.json --keepFiles)"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"2.0.0","@aws-crypto/sha256-js":"2.0.0","@aws-sdk/config-resolver":"3.234.0","@aws-sdk/credential-provider-node":"3.245.0","@aws-sdk/fetch-http-handler":"3.226.0","@aws-sdk/hash-node":"3.226.0","@aws-sdk/invalid-dependency":"3.226.0","@aws-sdk/middleware-content-length":"3.226.0","@aws-sdk/middleware-endpoint":"3.226.0","@aws-sdk/middleware-host-header":"3.226.0","@aws-sdk/middleware-logger":"3.226.0","@aws-sdk/middleware-recursion-detection":"3.226.0","@aws-sdk/middleware-retry":"3.235.0","@aws-sdk/middleware-sdk-sts":"3.226.0","@aws-sdk/middleware-serde":"3.226.0","@aws-sdk/middleware-signing":"3.226.0","@aws-sdk/middleware-stack":"3.226.0","@aws-sdk/middleware-user-agent":"3.226.0","@aws-sdk/node-config-provider":"3.226.0","@aws-sdk/node-http-handler":"3.226.0","@aws-sdk/protocol-http":"3.226.0","@aws-sdk/smithy-client":"3.234.0","@aws-sdk/types":"3.226.0","@aws-sdk/url-parser":"3.226.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.234.0","@aws-sdk/util-defaults-mode-node":"3.234.0","@aws-sdk/util-endpoints":"3.245.0","@aws-sdk/util-retry":"3.229.0","@aws-sdk/util-user-agent-browser":"3.226.0","@aws-sdk/util-user-agent-node":"3.226.0","@aws-sdk/util-utf8-browser":"3.188.0","@aws-sdk/util-utf8-node":"3.208.0","fast-xml-parser":"4.0.11",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var Xd="us-east-1",Qd=e=>typeof e!="function"?e===void 0?Xd:e:async()=>{try{return await e()}catch{return Xd}},ni=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:a,region:c,requestHandler:d}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:Qd(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:i}=await r.send(new fr(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},oi=(e,t)=>{let r;return async n=>{if(!r){let{logger:s,region:i,requestHandler:a}=e;r=new t({logger:s,region:Qd(i||e.region),...a?{requestHandler:a}:{}})}let{Credentials:o}=await r.send(new gr(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}},Zd=e=>t=>e({roleAssumer:ni(t,t.stsClientCtor),roleAssumerWithWebIdentity:oi(t,t.stsClientCtor),...t});var Sw="AWS_ACCESS_KEY_ID",Cw="AWS_SECRET_ACCESS_KEY",Aw="AWS_SESSION_TOKEN",xw="AWS_CREDENTIAL_EXPIRATION",wo=()=>async()=>{let e=process.env[Sw],t=process.env[Cw],r=process.env[Aw],n=process.env[xw];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new w("Unable to find environment variable credentials.")};var el=require("os"),tl=require("path"),hr=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${tl.sep}`}=process.env;return e||t||(r?`${n}${r}`:(0,el.homedir)())};var si="AWS_PROFILE",_w="default",ie=e=>e.profile||process.env[si]||_w;var rl=require("crypto"),nl=require("path");var Eo=e=>{let r=(0,rl.createHash)("sha1").update(e).digest("hex");return(0,nl.join)(hr(),".aws","sso","cache",`${r}.json`)};var ol=require("fs");var{readFile:Rw}=ol.promises,So=async e=>{let t=Eo(e),r=await Rw(t,"utf8");return JSON.parse(r)};var sl=require("path");var vw="AWS_CONFIG_FILE",Co=()=>process.env[vw]||(0,sl.join)(hr(),".aws","config");var il=require("path");var Iw="AWS_SHARED_CREDENTIALS_FILE",al=()=>process.env[Iw]||(0,il.join)(hr(),".aws","credentials");var cl=/^profile\s(["'])?([^\1]+)\1$/,dl=e=>Object.entries(e).filter(([t])=>cl.test(t)).reduce((t,[r,n])=>({...t,[cl.exec(r)[2]]:n}),{...e.default&&{default:e.default}});var bw=["__proto__","profile __proto__"],mn=e=>{let t={},r;for(let n of e.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),bw.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let s=n.indexOf("="),i=0,a=n.length-1;if(s!==-1&&s!==i&&s!==a){let[d,l]=[n.substring(0,s).trim(),n.substring(s+1).trim()];t[r]=t[r]||{},t[r][d]=l}}return t};var ll=require("fs"),{readFile:Tw}=ll.promises,ii={},fn=e=>(ii[e]||(ii[e]=Tw(e,"utf8")),ii[e]);var ul=()=>({}),Ao=async(e={})=>{let{filepath:t=al(),configFilepath:r=Co()}=e,n=await Promise.all([fn(r).then(mn).then(dl).catch(ul),fn(t).then(mn).catch(ul)]);return{configFile:n[0],credentialsFile:n[1]}};var pl=/^sso-session\s(["'])?([^\1]+)\1$/,ml=e=>Object.entries(e).filter(([t])=>pl.test(t)).reduce((t,[r,n])=>({...t,[pl.exec(r)[2]]:n}),{});var Nw=()=>({}),xo=async(e={})=>fn(e.configFilepath??Co()).then(mn).then(ml).catch(Nw);var Et=async e=>{let t=await Ao(e);return{...t.configFile,...t.credentialsFile}};var yl=require("url");var fl=require("buffer"),gl=require("http");function $e(e){return new Promise((t,r)=>{var o;let n=(0,gl.request)({method:"GET",...e,hostname:(o=e.hostname)==null?void 0:o.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new Y("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new Y("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new Y("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let a=[];s.on("data",c=>{a.push(c)}),s.on("end",()=>{t(fl.Buffer.concat(a)),n.destroy()})}),n.end()})}var _o=e=>Boolean(e)&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Ro=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var vo=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var gn=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};var hn="AWS_CONTAINER_CREDENTIALS_FULL_URI",yn="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",hl="AWS_CONTAINER_AUTHORIZATION_TOKEN",Io=(e={})=>{let{timeout:t,maxRetries:r}=vo(e);return()=>gn(async()=>{let n=await zw(),o=JSON.parse(await Pw(t,n));if(!_o(o))throw new w("Invalid response received from instance metadata service.");return Ro(o)},r)},Pw=async(e,t)=>(process.env[hl]&&(t.headers={...t.headers,Authorization:process.env[hl]}),(await $e({...t,timeout:e})).toString()),Ow="169.254.170.2",Dw={localhost:!0,"127.0.0.1":!0},kw={"http:":!0,"https:":!0},zw=async()=>{if(process.env[yn])return{hostname:Ow,path:process.env[yn]};if(process.env[hn]){let e=(0,yl.parse)(process.env[hn]);if(!e.hostname||!(e.hostname in Dw))throw new w(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in kw))throw new w(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new w(`The container metadata credential provider cannot be used unless the ${yn} or ${hn} environment variable is set`,!1)};var wl=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new w(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var El=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=ie(r),{configFile:o,credentialsFile:s}=await Ao(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new w(d.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};var Lw=e=>typeof e=="function",Sl=e=>Lw(e)?async()=>await e():uc(e);var C=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>ft(Qn(wl(e),El(t,n),Sl(r)));var wn;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(wn||(wn={}));var Fw="AWS_EC2_METADATA_SERVICE_ENDPOINT",Uw="ec2_metadata_service_endpoint",Cl={environmentVariableSelector:e=>e[Fw],configFileSelector:e=>e[Uw],default:void 0};var St;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(St||(St={}));var Mw="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",$w="ec2_metadata_service_endpoint_mode",Al={environmentVariableSelector:e=>e[Mw],configFileSelector:e=>e[$w],default:St.IPv4};var En=async()=>J(await qw()||await jw()),qw=async()=>C(Cl)(),jw=async()=>{let e=await C(Al)();switch(e){case St.IPv4:return wn.IPv4;case St.IPv6:return wn.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(St)}`)}};var Vw="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",ai=(e,t)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+Vw);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}};var xl=(e,t={})=>{let r=(t==null?void 0:t.logger)||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=ai(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=ai(n,r);else throw s}return n=o,o}};var _l="/latest/meta-data/iam/security-credentials/",Bw="/latest/api/token",bo=(e={})=>xl(Hw(e),{logger:e.logger}),Hw=e=>{let t=!1,{timeout:r,maxRetries:n}=vo(e),o=async(s,i)=>{let a=(await gn(async()=>{let c;try{c=await Ww(i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)).trim();return gn(async()=>{let c;try{c=await Kw(a,i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)};return async()=>{let s=await En();if(t)return o(n,{...s,timeout:r});{let i;try{i=(await Gw({...s,timeout:r})).toString()}catch(a){if((a==null?void 0:a.statusCode)===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),o(n,{...s,timeout:r})}return o(n,{...s,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},Gw=async e=>$e({...e,path:Bw,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),Ww=async e=>(await $e({...e,path:_l})).toString(),Kw=async(e,t)=>{let r=JSON.parse((await $e({...t,path:_l+e})).toString());if(!_o(r))throw new w("Invalid response received from instance metadata service.");return Ro(r)};var Rl=(e,t)=>{let r={EcsContainer:Io,Ec2InstanceMetadata:bo,Environment:wo};if(e in r)return r[e]();throw new w(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var vl=e=>Boolean(e)&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(Jw(e)||Yw(e)),Jw=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",Yw=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",Il=async(e,t,r,n={})=>{let o=t[e];if(!r.roleAssumer)throw new w(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=o;if(s&&s in n)throw new w(`Detected a cycle attempting to resolve credentials for profile ${ie(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=s?To(s,t,r,{...n,[s]:!0}):Rl(o.credential_source,e)(),a={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id},{mfa_serial:c}=o;if(c){if(!r.mfaCodeProvider)throw new w(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=c,a.TokenCode=await r.mfaCodeProvider(c)}let d=await i;return r.roleAssumer(d,a)};var Tl=require("child_process"),Nl=require("util");var bl=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var Pl=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let o=(0,Nl.promisify)(Tl.exec);try{let{stdout:s}=await o(n),i;try{i=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return bl(e,i)}catch(s){throw new w(s.message)}}else throw new w(`Profile ${e} did not contain credential_process.`)}else throw new w(`Profile ${e} could not be found in shared credentials file.`)};var No=(e={})=>async()=>{let t=await Et(e);return Pl(ie(e),t)};var Ol=e=>Boolean(e)&&typeof e=="object"&&typeof e.credential_process=="string",Dl=async(e,t)=>No({...e,profile:t})();var Sn=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var ge=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,ge.prototype)}};var yr=class extends ge{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,yr.prototype)}},wr=class extends ge{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,wr.prototype)}},Er=class extends ge{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Er.prototype)}},Sr=class extends ge{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,Sr.prototype)}};var kl=e=>({...e,...e.accessToken&&{accessToken:ne}}),Xw=e=>({...e,...e.secretAccessKey&&{secretAccessKey:ne},...e.sessionToken&&{sessionToken:ne}}),zl=e=>({...e,...e.roleCredentials&&{roleCredentials:Xw(e.roleCredentials)}});var Ll=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=$t({},iE,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/federation/credentials`,c=$t({role_name:[,M(e.roleName,"roleName")],account_id:[,M(e.accountId,"accountId")]}),d;return new R({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Fl=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Qw(e,t);let r=$t({$metadata:Cn(e)}),n=M(ho(await Ul(e.body,t)),"body");return n.roleCredentials!=null&&(r.roleCredentials=nE(n.roleCredentials,t)),r},Qw=async(e,t)=>{let r={...e,body:await aE(e.body,t)},n=cE(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Zw(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await eE(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await tE(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await rE(r,t);default:let o=r.body;H({output:e,parsedBody:o,exceptionCtor:ge,errorCode:n})}};var $t=ln,Zw=async(e,t)=>{let r=$t({}),n=e.body;n.message!=null&&(r.message=m(n.message));let o=new yr({$metadata:Cn(e),...r});return S(o,e.body)},eE=async(e,t)=>{let r=$t({}),n=e.body;n.message!=null&&(r.message=m(n.message));let o=new wr({$metadata:Cn(e),...r});return S(o,e.body)},tE=async(e,t)=>{let r=$t({}),n=e.body;n.message!=null&&(r.message=m(n.message));let o=new Er({$metadata:Cn(e),...r});return S(o,e.body)},rE=async(e,t)=>{let r=$t({}),n=e.body;n.message!=null&&(r.message=m(n.message));let o=new Sr({$metadata:Cn(e),...r});return S(o,e.body)};var nE=(e,t)=>({accessKeyId:m(e.accessKeyId),expiration:go(e.expiration),secretAccessKey:m(e.secretAccessKey),sessionToken:m(e.sessionToken)});var Cn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),oE=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),sE=(e,t)=>oE(e,t).then(r=>t.utf8Encoder(r)),iE=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Ul=(e,t)=>sE(e,t).then(r=>r.length?JSON.parse(r):{}),aE=async(e,t)=>{let r=await Ul(e,t);return r.message=r.message??r.Message,r},cE=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Cr=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Cr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:kl,outputFilterSensitiveLog:zl},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Ll(t,r)}deserialize(t,r){return Fl(t,r)}};var Ml=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var $l={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.245.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"(cd ../../ && yarn generate-clients -g ./codegen/sdk-codegen/aws-models/sso.json --keepFiles)"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"2.0.0","@aws-crypto/sha256-js":"2.0.0","@aws-sdk/config-resolver":"3.234.0","@aws-sdk/fetch-http-handler":"3.226.0","@aws-sdk/hash-node":"3.226.0","@aws-sdk/invalid-dependency":"3.226.0","@aws-sdk/middleware-content-length":"3.226.0","@aws-sdk/middleware-endpoint":"3.226.0","@aws-sdk/middleware-host-header":"3.226.0","@aws-sdk/middleware-logger":"3.226.0","@aws-sdk/middleware-recursion-detection":"3.226.0","@aws-sdk/middleware-retry":"3.235.0","@aws-sdk/middleware-serde":"3.226.0","@aws-sdk/middleware-stack":"3.226.0","@aws-sdk/middleware-user-agent":"3.226.0","@aws-sdk/node-config-provider":"3.226.0","@aws-sdk/node-http-handler":"3.226.0","@aws-sdk/protocol-http":"3.226.0","@aws-sdk/smithy-client":"3.234.0","@aws-sdk/types":"3.226.0","@aws-sdk/url-parser":"3.226.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.234.0","@aws-sdk/util-defaults-mode-node":"3.234.0","@aws-sdk/util-endpoints":"3.245.0","@aws-sdk/util-retry":"3.229.0","@aws-sdk/util-user-agent-browser":"3.226.0","@aws-sdk/util-user-agent-node":"3.226.0","@aws-sdk/util-utf8-browser":"3.188.0","@aws-sdk/util-utf8-node":"3.208.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var Po=require("buffer"),qt=(e,t=0,r=e.byteLength-t)=>{if(!no(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Po.Buffer.from(e,t,r)},Ar=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Po.Buffer.from(e,t):Po.Buffer.from(e)};var jl=require("buffer"),Oo=require("crypto"),ve=class{constructor(t,r){this.hash=r?(0,Oo.createHmac)(t,ql(r)):(0,Oo.createHash)(t)}update(t,r){this.hash.update(ql(t,r))}digest(){return Promise.resolve(this.hash.digest())}};function ql(e,t){return jl.Buffer.isBuffer(e)?e:typeof e=="string"?Ar(e,t):ArrayBuffer.isView(e)?qt(e.buffer,e.byteOffset,e.byteLength):qt(e)}function ci(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Ae(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Ae(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Ae(n)}`),t.push(o)}}return t.join("&")}var Do=require("http"),ko=require("https");var Vl=["ECONNRESET","EPIPE","ETIMEDOUT"];var di=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};var Bl=(e,t,r=0)=>{r&&e.on("socket",n=>{if(n.connecting){let o=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);n.on("connect",()=>{clearTimeout(o)})}})};var Hl=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};var Wl=require("stream");function li(e,t){(t.headers.Expect||t.headers.expect)==="100-continue"?e.on("continue",()=>{Gl(e,t.body)}):Gl(e,t.body)}function Gl(e,t){t instanceof Wl.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var Ie=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{connectionTimeout:r,socketTimeout:n,httpAgent:o,httpsAgent:s}=t||{},i=!0,a=50;return{connectionTimeout:r,socketTimeout:n,httpAgent:o||new Do.Agent({keepAlive:i,maxSockets:a}),httpsAgent:s||new ko.Agent({keepAlive:i,maxSockets:a})}}destroy(){var t,r,n,o;(r=(t=this.config)==null?void 0:t.httpAgent)==null||r.destroy(),(o=(n=this.config)==null?void 0:n.httpsAgent)==null||o.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r!=null&&r.aborted){let l=new Error("Request aborted");l.name="AbortError",o(l);return}let s=t.protocol==="https:",i=ci(t.query||{}),a={headers:t.headers,host:t.hostname,method:t.method,path:i?`${t.path}?${i}`:t.path,port:t.port,agent:s?this.config.httpsAgent:this.config.httpAgent},d=(s?ko.request:Do.request)(a,l=>{let u=new Ee({statusCode:l.statusCode||-1,headers:di(l.headers),body:l});n({response:u})});d.on("error",l=>{Vl.includes(l.code)?o(Object.assign(l,{name:"TimeoutError"})):o(l)}),Bl(d,o,this.config.connectionTimeout),Hl(d,o,this.config.socketTimeout),r&&(r.onabort=()=>{d.abort();let l=new Error("Request aborted");l.name="AbortError",o(l)}),li(d,t)})}};var Kl=require("stream"),zo=class extends Kl.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};var Ct=e=>new Promise((t,r)=>{let n=new zo;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})});var Lo=require("fs"),At=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Lo.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Lo.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Fo=require("os"),An=require("process");var Jl=()=>{try{return typeof require=="function"&&typeof module<"u"&&module.require&&require("aws-crt")?["md/crt-avail"]:null}catch{return null}};var lE="AWS_SDK_UA_APP_ID",uE="sdk-ua-app-id",xt=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],[`os/${(0,Fo.platform)()}`,(0,Fo.release)()],["lang/js"],["md/nodejs",`${An.versions.node}`]],n=Jl();n&&r.push(n),e&&r.push([`api/${e}`,t]),An.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${An.env.AWS_EXECUTION_ENV}`]);let o=C({environmentVariableSelector:i=>i[lE],configFileSelector:i=>i[uE],default:void 0})(),s;return async()=>{if(!s){let i=await o;s=i?[...r,[`app/${i}`]]:[...r]}return s}};var _t=e=>{let t=Ar(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Rt=e=>qt(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var pE=/^[A-Za-z0-9+/]*={0,2}$/,vt=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!pE.exec(e))throw new TypeError("Invalid base64 string.");let t=Ar(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var It=e=>qt(e.buffer,e.byteOffset,e.byteLength).toString("base64");var Yl={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"};var{partitions:ui}=Yl,Xl=ui.find(e=>e.id==="aws"),fE=e=>{for(let t of ui){let{regions:r,outputs:n}=t;for(let[o,s]of Object.entries(r))if(o===e)return{...n,...s}}for(let t of ui){let{regionRegex:r,outputs:n}=t;if(new RegExp(r).test(e))return{...n}}if(!Xl)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...Xl.outputs}};var qe="endpoints";function ae(e){return typeof e!="object"||e==null?e:"ref"in e?`$${ae(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(ae).join(", ")})`:JSON.stringify(e,null,2)}var v=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var gi={};kn(gi,{aws:()=>pi,booleanEquals:()=>wE,getAttr:()=>mi,isSet:()=>EE,isValidHostLabel:()=>Mo,not:()=>SE,parseURL:()=>CE,stringEquals:()=>AE,substring:()=>xE,uriEncode:()=>_E});var pi={};kn(pi,{isVirtualHostableS3Bucket:()=>Ql,parseArn:()=>yE,partition:()=>fE});var gE=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Uo=e=>gE.test(e)||e.startsWith("[")&&e.endsWith("]");var hE=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Mo=(e,t=!1)=>{if(!t)return hE.test(e);let r=e.split(".");for(let n of r)if(!Mo(n))return!1;return!0};var Ql=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Ql(r))return!1;return!0}return!(!Mo(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Uo(e))};var yE=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,o,s,i,...a]=t;return r!=="arn"||n===""||o===""||a[0]===""?null:{partition:n,service:o,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var wE=(e,t)=>e===t;var Zl=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new v(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new v(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r};var mi=(e,t)=>Zl(t).reduce((r,n)=>{if(typeof r!="object")throw new v(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var EE=e=>e!=null;var SE=e=>!e;var xr;(function(e){e.HTTP="http",e.HTTPS="https"})(xr||(xr={}));var fi={[xr.HTTP]:80,[xr.HTTPS]:443},CE=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:p,port:f,protocol:g="",path:h="",query:E={}}=e,he=new URL(`${g}//${p}${f?`:${f}`:""}${h}`);return he.search=Object.entries(E).map(([Ui,me])=>`${Ui}=${me}`).join("&"),he}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(xr).includes(c))return null;let d=Uo(o),l=r.includes(`${n}:${fi[c]}`)||typeof e=="string"&&e.includes(`${n}:${fi[c]}`),u=`${n}${l?`:${fi[c]}`:""}`;return{scheme:c,authority:u,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}};var AE=(e,t)=>e===t;var xE=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var _E=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var $o=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(mi(n[c],d))}else r.push(n[a]);o=i+1}return r.join("")};var eu=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var bt=(e,t,r)=>{if(typeof e=="string")return $o(e,r);if(e.fn)return qo(e,r);if(e.ref)return eu(e,r);throw new v(`'${t}': ${String(e)} is not a string, function or reference.`)};var qo=({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:bt(o,"arg",r));return e.split(".").reduce((o,s)=>o[s],gi)(...n)};var tu=({assign:e,...t},r)=>{var o,s;if(e&&e in r.referenceRecord)throw new v(`'${e}' is already defined in Reference Record.`);let n=qo(t,r);return(s=(o=r.logger)==null?void 0:o.debug)==null||s.call(o,qe,`evaluateCondition: ${ae(t)} = ${ae(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var _r=(e=[],t)=>{var n,o;let r={};for(let s of e){let{result:i,toAssign:a}=tu(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!i)return{result:i};a&&(r[a.name]=a.value,(o=(n=t.logger)==null?void 0:n.debug)==null||o.call(n,qe,`assign: ${a.name} := ${ae(a.value)}`))}return{result:!0,referenceRecord:r}};var ru=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=bt(s,"Header value entry",t);if(typeof i!="string")throw new v(`Header '${n}' value '${i}' is not a string`);return i})}),{});var hi=(e,t)=>{if(Array.isArray(e))return e.map(r=>hi(r,t));switch(typeof e){case"string":return $o(e,t);case"object":if(e===null)throw new v(`Unexpected endpoint property: ${e}`);return jo(e,t);case"boolean":return e;default:throw new v(`Unexpected endpoint property type: ${typeof e}`)}};var jo=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:hi(o,t)}),{});var nu=(e,t)=>{let r=bt(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new v(`Endpoint URL must be a string, got ${typeof r}`)};var ou=(e,t)=>{var l,u;let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=_r(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:d}=n;return(u=(l=t.logger)==null?void 0:l.debug)==null||u.call(l,qe,`Resolving endpoint from template: ${ae(n)}`),{...d!=null&&{headers:ru(d,i)},...c!=null&&{properties:jo(c,i)},url:nu(a,i)}};var su=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=_r(r,t);if(o)throw new v(bt(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var iu=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=_r(r,t);if(o)return Vo(n,{...t,referenceRecord:{...t.referenceRecord,...s}})};var Vo=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=ou(r,t);if(n)return n}else if(r.type==="error")su(r,t);else if(r.type==="tree"){let n=iu(r,t);if(n)return n}else throw new v(`Unknown endpoint rule: ${r}`);throw new v("Rules evaluation failed")};var Tt=(e,t)=>{var d,l,u,p,f;let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,qe,`Initial EndpointParams: ${ae(r)}`);let i=Object.entries(o).filter(([,g])=>g.default!=null).map(([g,h])=>[g,h.default]);if(i.length>0)for(let[g,h]of i)r[g]=r[g]??h;let a=Object.entries(o).filter(([,g])=>g.required).map(([g])=>g);for(let g of a)if(r[g]==null)throw new v(`Missing required parameter: '${g}'`);let c=Vo(s,{endpointParams:r,logger:n,referenceRecord:{}});if((u=t.endpointParams)!=null&&u.Endpoint)try{let g=new URL(t.endpointParams.Endpoint),{protocol:h,port:E}=g;c.url.protocol=h,c.url.port=E}catch{}return(f=(p=t.logger)==null?void 0:p.debug)==null||f.call(p,qe,`Resolved endpoint: ${ae(c)}`),c};var fu="required",je="fn",Ve="argv",Rr="ref",yi="PartitionResult",be="tree",xn="error",_n="endpoint",au={[fu]:!1,type:"String"},cu={[fu]:!0,default:!1,type:"Boolean"},gu={[Rr]:"Endpoint"},hu={[je]:"booleanEquals",[Ve]:[{[Rr]:"UseFIPS"},!0]},yu={[je]:"booleanEquals",[Ve]:[{[Rr]:"UseDualStack"},!0]},Te={},du={[je]:"booleanEquals",[Ve]:[!0,{[je]:"getAttr",[Ve]:[{[Rr]:yi},"supportsFIPS"]}]},lu={[je]:"booleanEquals",[Ve]:[!0,{[je]:"getAttr",[Ve]:[{[Rr]:yi},"supportsDualStack"]}]},uu=[gu],pu=[hu],mu=[yu],RE={version:"1.0",parameters:{Region:au,UseDualStack:cu,UseFIPS:cu,Endpoint:au},rules:[{conditions:[{[je]:"aws.partition",[Ve]:[{[Rr]:"Region"}],assign:yi}],type:be,rules:[{conditions:[{[je]:"isSet",[Ve]:uu},{[je]:"parseURL",[Ve]:uu,assign:"url"}],type:be,rules:[{conditions:pu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:xn},{type:be,rules:[{conditions:mu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:xn},{endpoint:{url:gu,properties:Te,headers:Te},type:_n}]}]},{conditions:[hu,yu],type:be,rules:[{conditions:[du,lu],type:be,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Te,headers:Te},type:_n}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:xn}]},{conditions:pu,type:be,rules:[{conditions:[du],type:be,rules:[{type:be,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Te,headers:Te},type:_n}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:xn}]},{conditions:mu,type:be,rules:[{conditions:[lu],type:be,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Te,headers:Te},type:_n}]},{error:"DualStack is enabled but this partition does not support DualStack",type:xn}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Te,headers:Te},type:_n}]}]},wu=RE;var Eu=(e,t={})=>Tt(wu,{endpointParams:e,logger:t.logger});var Su=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??vt,base64Encoder:(e==null?void 0:e.base64Encoder)??It,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Eu,logger:(e==null?void 0:e.logger)??new xe,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??J});var Cu="AWS_EXECUTION_ENV",wi="AWS_REGION",Ei="AWS_DEFAULT_REGION",Au="AWS_EC2_METADATA_DISABLED",xu=["in-region","cross-region","mobile","standard","legacy"],_u="/latest/meta-data/placement/region";var vE="AWS_DEFAULTS_MODE",IE="defaults_mode",Ru={environmentVariableSelector:e=>e[vE],configFileSelector:e=>e[IE],default:"legacy"};var Nt=({region:e=C(we),defaultsMode:t=C(Ru)}={})=>ft(async()=>{let r=typeof t=="function"?await t():t;switch(r==null?void 0:r.toLowerCase()){case"auto":return bE(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${xu.join(", ")}, got ${r}`)}}),bE=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await TE();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},TE=async()=>{if(process.env[Cu]&&(process.env[wi]||process.env[Ei]))return process.env[wi]??process.env[Ei];if(!process.env[Au])try{let e=await En();return(await $e({...e,path:_u})).toString()}catch{}};var vu=e=>{wt(process.version);let t=Nt(e),r=()=>t().then(yt),n=Su(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??At,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??xt({serviceId:n.serviceId,clientVersion:$l.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??C(lt),region:(e==null?void 0:e.region)??C(we,nt),requestHandler:(e==null?void 0:e.requestHandler)??new Ie(r),retryMode:(e==null?void 0:e.retryMode)??C({...pt,default:async()=>(await r()).retryMode||Ce}),sha256:(e==null?void 0:e.sha256)??ve.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Ct,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??C(tt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??C(rt),utf8Decoder:(e==null?void 0:e.utf8Decoder)??_t,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Rt}};var Bo=class extends _e{constructor(t){let r=vu(t),n=Ml(r),o=ot(n),s=it(o),i=ut(s),a=i,c=gt(a);super(c),this.config=c,this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(st(this.config)),this.middlewareStack.use(at(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(ht(this.config))}destroy(){super.destroy()}};var vr="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var z=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,z.prototype)}};var Ir=class extends z{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Ir.prototype),this.error=t.error,this.error_description=t.error_description}},br=class extends z{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,br.prototype),this.error=t.error,this.error_description=t.error_description}},Tr=class extends z{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Tr.prototype),this.error=t.error,this.error_description=t.error_description}},Nr=class extends z{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Nr.prototype),this.error=t.error,this.error_description=t.error_description}},Pr=class extends z{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Pr.prototype),this.error=t.error,this.error_description=t.error_description}},Or=class extends z{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Or.prototype),this.error=t.error,this.error_description=t.error_description}},Dr=class extends z{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Dr.prototype),this.error=t.error,this.error_description=t.error_description}},kr=class extends z{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,kr.prototype),this.error=t.error,this.error_description=t.error_description}},zr=class extends z{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,zr.prototype),this.error=t.error,this.error_description=t.error_description}},Lr=class extends z{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Lr.prototype),this.error=t.error,this.error_description=t.error_description}},Fr=class extends z{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,Fr.prototype),this.error=t.error,this.error_description=t.error_description}};var Iu=e=>({...e}),bu=e=>({...e});var Tu=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify({...e.clientId!=null&&{clientId:e.clientId},...e.clientSecret!=null&&{clientSecret:e.clientSecret},...e.code!=null&&{code:e.code},...e.deviceCode!=null&&{deviceCode:e.deviceCode},...e.grantType!=null&&{grantType:e.grantType},...e.redirectUri!=null&&{redirectUri:e.redirectUri},...e.refreshToken!=null&&{refreshToken:e.refreshToken},...e.scope!=null&&{scope:jE(e.scope,t)}}),new R({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})};var Nu=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return NE(e,t);let r=ce({$metadata:de(e)}),n=M(ho(await Pu(e.body,t)),"body");return n.accessToken!=null&&(r.accessToken=m(n.accessToken)),n.expiresIn!=null&&(r.expiresIn=Re(n.expiresIn)),n.idToken!=null&&(r.idToken=m(n.idToken)),n.refreshToken!=null&&(r.refreshToken=m(n.refreshToken)),n.tokenType!=null&&(r.tokenType=m(n.tokenType)),r},NE=async(e,t)=>{let r={...e,body:await HE(e.body,t)},n=GE(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await PE(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await OE(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await DE(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await kE(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await zE(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await LE(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await FE(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await UE(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await ME(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await $E(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await qE(r,t);default:let o=r.body;H({output:e,parsedBody:o,exceptionCtor:z,errorCode:n})}};var ce=ln,PE=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new Ir({$metadata:de(e),...r});return S(o,e.body)},OE=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new br({$metadata:de(e),...r});return S(o,e.body)},DE=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new Tr({$metadata:de(e),...r});return S(o,e.body)},kE=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new Nr({$metadata:de(e),...r});return S(o,e.body)},zE=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new Pr({$metadata:de(e),...r});return S(o,e.body)};var LE=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new Or({$metadata:de(e),...r});return S(o,e.body)},FE=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new Dr({$metadata:de(e),...r});return S(o,e.body)},UE=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new kr({$metadata:de(e),...r});return S(o,e.body)},ME=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new zr({$metadata:de(e),...r});return S(o,e.body)},$E=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new Lr({$metadata:de(e),...r});return S(o,e.body)},qE=async(e,t)=>{let r=ce({}),n=e.body;n.error!=null&&(r.error=m(n.error)),n.error_description!=null&&(r.error_description=m(n.error_description));let o=new Fr({$metadata:de(e),...r});return S(o,e.body)},jE=(e,t)=>e.filter(r=>r!=null).map(r=>r),de=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),VE=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),BE=(e,t)=>VE(e,t).then(r=>t.utf8Encoder(r));var Pu=(e,t)=>BE(e,t).then(r=>r.length?JSON.parse(r):{}),HE=async(e,t)=>{let r=await Pu(e,t);return r.message=r.message??r.Message,r},GE=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Ur=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Ur.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:Iu,outputFilterSensitiveLog:bu},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Tu(t,r)}deserialize(t,r){return Nu(t,r)}};var Ou=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var Du={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.245.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"(cd ../../ && yarn generate-clients -g ./codegen/sdk-codegen/aws-models/sso-oidc.json --keepFiles)"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"2.0.0","@aws-crypto/sha256-js":"2.0.0","@aws-sdk/config-resolver":"3.234.0","@aws-sdk/fetch-http-handler":"3.226.0","@aws-sdk/hash-node":"3.226.0","@aws-sdk/invalid-dependency":"3.226.0","@aws-sdk/middleware-content-length":"3.226.0","@aws-sdk/middleware-endpoint":"3.226.0","@aws-sdk/middleware-host-header":"3.226.0","@aws-sdk/middleware-logger":"3.226.0","@aws-sdk/middleware-recursion-detection":"3.226.0","@aws-sdk/middleware-retry":"3.235.0","@aws-sdk/middleware-serde":"3.226.0","@aws-sdk/middleware-stack":"3.226.0","@aws-sdk/middleware-user-agent":"3.226.0","@aws-sdk/node-config-provider":"3.226.0","@aws-sdk/node-http-handler":"3.226.0","@aws-sdk/protocol-http":"3.226.0","@aws-sdk/smithy-client":"3.234.0","@aws-sdk/types":"3.226.0","@aws-sdk/url-parser":"3.226.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.234.0","@aws-sdk/util-defaults-mode-node":"3.234.0","@aws-sdk/util-endpoints":"3.245.0","@aws-sdk/util-retry":"3.229.0","@aws-sdk/util-user-agent-browser":"3.226.0","@aws-sdk/util-user-agent-node":"3.226.0","@aws-sdk/util-utf8-browser":"3.188.0","@aws-sdk/util-utf8-node":"3.208.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var qu="required",Be="fn",He="argv",Mr="ref",Ci="PartitionResult",Ne="tree",Rn="error",vn="endpoint",ku={[qu]:!1,type:"String"},zu={[qu]:!0,default:!1,type:"Boolean"},ju={[Mr]:"Endpoint"},Vu={[Be]:"booleanEquals",[He]:[{[Mr]:"UseFIPS"},!0]},Bu={[Be]:"booleanEquals",[He]:[{[Mr]:"UseDualStack"},!0]},Pe={},Lu={[Be]:"booleanEquals",[He]:[!0,{[Be]:"getAttr",[He]:[{[Mr]:Ci},"supportsFIPS"]}]},Fu={[Be]:"booleanEquals",[He]:[!0,{[Be]:"getAttr",[He]:[{[Mr]:Ci},"supportsDualStack"]}]},Uu=[ju],Mu=[Vu],$u=[Bu],KE={version:"1.0",parameters:{Region:ku,UseDualStack:zu,UseFIPS:zu,Endpoint:ku},rules:[{conditions:[{[Be]:"aws.partition",[He]:[{[Mr]:"Region"}],assign:Ci}],type:Ne,rules:[{conditions:[{[Be]:"isSet",[He]:Uu},{[Be]:"parseURL",[He]:Uu,assign:"url"}],type:Ne,rules:[{conditions:Mu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Rn},{type:Ne,rules:[{conditions:$u,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Rn},{endpoint:{url:ju,properties:Pe,headers:Pe},type:vn}]}]},{conditions:[Vu,Bu],type:Ne,rules:[{conditions:[Lu,Fu],type:Ne,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Pe,headers:Pe},type:vn}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Rn}]},{conditions:Mu,type:Ne,rules:[{conditions:[Lu],type:Ne,rules:[{type:Ne,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Pe,headers:Pe},type:vn}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Rn}]},{conditions:$u,type:Ne,rules:[{conditions:[Fu],type:Ne,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Pe,headers:Pe},type:vn}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Rn}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Pe,headers:Pe},type:vn}]}]},Hu=KE;var Gu=(e,t={})=>Tt(Hu,{endpointParams:e,logger:t.logger});var Wu=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??vt,base64Encoder:(e==null?void 0:e.base64Encoder)??It,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Gu,logger:(e==null?void 0:e.logger)??new xe,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??J});var Ku=e=>{wt(process.version);let t=Nt(e),r=()=>t().then(yt),n=Wu(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??At,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??xt({serviceId:n.serviceId,clientVersion:Du.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??C(lt),region:(e==null?void 0:e.region)??C(we,nt),requestHandler:(e==null?void 0:e.requestHandler)??new Ie(r),retryMode:(e==null?void 0:e.retryMode)??C({...pt,default:async()=>(await r()).retryMode||Ce}),sha256:(e==null?void 0:e.sha256)??ve.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Ct,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??C(tt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??C(rt),utf8Decoder:(e==null?void 0:e.utf8Decoder)??_t,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Rt}};var Ho=class extends _e{constructor(t){let r=Ku(t),n=Ou(r),o=ot(n),s=it(o),i=ut(s),a=i,c=gt(a);super(c),this.config=c,this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(st(this.config)),this.middlewareStack.use(at(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(ht(this.config))}destroy(){super.destroy()}};var Ai={},Ju=e=>{if(Ai[e])return Ai[e];let t=new Ho({region:e});return Ai[e]=t,t};var Yu=(e,t)=>Ju(t).send(new Ur({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var xi=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new X(`Token is expired. ${vr}`,!1)};var Pt=(e,t,r=!1)=>{if(typeof t>"u")throw new X(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${vr}`,!1)};var Xu=require("fs"),{writeFile:JE}=Xu.promises,Qu=(e,t)=>{let r=Eo(e),n=JSON.stringify(t,null,2);return JE(r,n)};var Zu=new Date(0),ep=(e={})=>async()=>{let t=await Et(e),r=ie(e),n=t[r];if(n){if(!n.sso_session)throw new X(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new X(`Profile '${r}' could not be found in shared credentials file.`,!1);let o=n.sso_session,i=(await xo(e))[o];if(!i)throw new X(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let f of["sso_start_url","sso_region"])if(!i[f])throw new X(`Sso session '${o}' is missing required property '${f}'.`,!1);let a=i.sso_start_url,c=i.sso_region,d;try{d=await So(o)}catch{throw new X(`The SSO session token associated with profile=${r} was not found or is invalid. ${vr}`,!1)}Pt("accessToken",d.accessToken),Pt("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:u}=d,p={token:l,expiration:new Date(u)};if(p.expiration.getTime()-Date.now()>3e5)return p;if(Date.now()-Zu.getTime()<30*1e3)return xi(p),p;Pt("clientId",d.clientId,!0),Pt("clientSecret",d.clientSecret,!0),Pt("refreshToken",d.refreshToken,!0);try{Zu.setTime(Date.now());let f=await Yu(d,c);Pt("accessToken",f.accessToken),Pt("expiresIn",f.expiresIn);let g=new Date(Date.now()+f.expiresIn*1e3);try{await Qu(o,{...d,accessToken:f.accessToken,expiresAt:g.toISOString(),refreshToken:f.refreshToken})}catch{}return{token:f.accessToken,expiration:g}}catch{return xi(p),p}};var XE=15*60*1e3,In=!1,_i=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:i})=>{let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let E=await ep({profile:i})();a={accessToken:E.token,expiresAt:new Date(E.expiration).toISOString()}}catch(E){throw new w(E.message,In)}else try{a=await So(e)}catch{throw new w(`The SSO session associated with this profile is invalid. ${c}`,In)}if(new Date(a.expiresAt).getTime()-Date.now()<=XE)throw new w(`The SSO session associated with this profile has expired. ${c}`,In);let{accessToken:d}=a,l=s||new Bo({region:n}),u;try{u=await l.send(new Cr({accountId:r,roleName:o,accessToken:d}))}catch(E){throw w.from(E,In)}let{roleCredentials:{accessKeyId:p,secretAccessKey:f,sessionToken:g,expiration:h}={}}=u;if(!p||!f||!g||!h)throw new w("SSO returns an invalid temporary credential.",In);return{accessKeyId:p,secretAccessKey:f,sessionToken:g,expiration:new Date(h)}};var Go=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:o}=e;if(!t||!r||!n||!o)throw new w(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var Wo=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,ssoSession:i}=e,a=ie(e);if(!t&&!r&&!n&&!o&&!i){let d=(await Et(e))[a];if(!d)throw new w(`Profile ${a} was not found.`);if(!Sn(d))throw new w(`Profile ${a} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let E=(await xo(e))[d.sso_session],he=` configurations in profile ${a} and sso-session ${d.sso_session}`;if(n&&n!==E.sso_region)throw new w("Conflicting SSO region"+he,!1);if(t&&t!==E.sso_start_url)throw new w("Conflicting SSO start_url"+he,!1);d.sso_region=E.sso_region,d.sso_start_url=E.sso_start_url}let{sso_start_url:l,sso_account_id:u,sso_region:p,sso_role_name:f,sso_session:g}=Go(d);return _i({ssoStartUrl:l,ssoSession:g,ssoAccountId:u,ssoRegion:p,ssoRoleName:f,ssoClient:s,profile:a})}else{if(!t||!r||!n||!o)throw new w('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return _i({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:a})}};var tp=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:o,sso_role_name:s}=Go(e);return Wo({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:o,ssoRoleName:s})()};var Ri=e=>Boolean(e)&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,vi=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var np=require("fs");var rp=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:s,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:c}=e;if(!c)throw new w(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:s,Policy:i,DurationSeconds:a})};var QE="AWS_WEB_IDENTITY_TOKEN_FILE",ZE="AWS_ROLE_ARN",eS="AWS_ROLE_SESSION_NAME",Ko=(e={})=>async()=>tS(e),tS=e=>{let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[QE],r=(e==null?void 0:e.roleArn)??process.env[ZE],n=(e==null?void 0:e.roleSessionName)??process.env[eS];if(!t||!r)throw new w("Web identity configuration not specified");return rp({...e,webIdentityToken:(0,np.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var op=e=>Boolean(e)&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,sp=async(e,t)=>Ko({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var To=async(e,t,r,n={})=>{let o=t[e];if(Object.keys(n).length>0&&Ri(o))return vi(o);if(vl(o))return Il(e,t,r,n);if(Ri(o))return vi(o);if(op(o))return sp(o,r);if(Ol(o))return Dl(r,e);if(Sn(o))return tp(o);throw new w(`Profile ${e} could not be found or parsed in shared credentials file.`)};var ip=(e={})=>async()=>{let t=await Et(e);return To(ie(e),t,e)};var rS="AWS_EC2_METADATA_DISABLED",ap=e=>process.env[yn]||process.env[hn]?Io(e):process.env[rS]?async()=>{throw new w("EC2 Instance Metadata Service access disabled")}:bo(e);var Jo=(e={})=>ft(Qn(...e.profile||process.env[si]?[]:[wo()],Wo(e),ip(e),No(e),Ko(e),ap(e),async()=>{throw new w("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var hp="required",A="fn",x="argv",kt="ref",Ot="properties",Dt="headers";var Pi="PartitionResult",le="tree",jt="booleanEquals",$="stringEquals",yp="https://sts.amazonaws.com",bi="sigv4",Ti="sts",Ni="us-east-1",T="endpoint",wp="https://sts.{Region}.{PartitionResult#dnsSuffix}",bn="error",Oi="getAttr",cp={[hp]:!1,type:"String"},Ii={[hp]:!0,default:!1,type:"Boolean"},q={[kt]:"Region"},Ep={[kt]:"UseFIPS"},Sp={[kt]:"UseDualStack"},dp={[A]:"isSet",[x]:[{[kt]:"Endpoint"}]},Cp={[kt]:"Endpoint"},j={url:yp,[Ot]:{authSchemes:[{name:bi,signingName:Ti,signingRegion:Ni}]},[Dt]:{}},Oe={},Ap={[A]:jt,[x]:[Ep,!0]},xp={[A]:jt,[x]:[Sp,!0]},lp={[A]:jt,[x]:[!0,{[A]:Oi,[x]:[{[kt]:Pi},"supportsFIPS"]}]},_p={[kt]:Pi},up={[A]:jt,[x]:[!0,{[A]:Oi,[x]:[_p,"supportsDualStack"]}]},pp={url:wp,[Ot]:{},[Dt]:{}},nS=[Cp],mp=[{[A]:$,[x]:[q,"aws-global"]}],fp=[Ap],gp=[xp],oS={version:"1.0",parameters:{Region:cp,UseDualStack:Ii,UseFIPS:Ii,Endpoint:cp,UseGlobalEndpoint:Ii},rules:[{conditions:[{[A]:"aws.partition",[x]:[q],assign:Pi}],type:le,rules:[{conditions:[{[A]:jt,[x]:[{[kt]:"UseGlobalEndpoint"},!0]},{[A]:jt,[x]:[Ep,!1]},{[A]:jt,[x]:[Sp,!1]},{[A]:"not",[x]:[dp]}],type:le,rules:[{conditions:[{[A]:$,[x]:[q,"ap-northeast-1"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"ap-south-1"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"ap-southeast-1"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"ap-southeast-2"]}],endpoint:j,type:T},{conditions:mp,endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"ca-central-1"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"eu-central-1"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"eu-north-1"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"eu-west-1"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"eu-west-2"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"eu-west-3"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"sa-east-1"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,Ni]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"us-east-2"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"us-west-1"]}],endpoint:j,type:T},{conditions:[{[A]:$,[x]:[q,"us-west-2"]}],endpoint:j,type:T},{endpoint:{url:wp,[Ot]:{authSchemes:[{name:bi,signingName:Ti,signingRegion:"{Region}"}]},[Dt]:Oe},type:T}]},{conditions:[dp,{[A]:"parseURL",[x]:nS,assign:"url"}],type:le,rules:[{conditions:fp,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:bn},{type:le,rules:[{conditions:gp,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:bn},{endpoint:{url:Cp,[Ot]:Oe,[Dt]:Oe},type:T}]}]},{conditions:[Ap,xp],type:le,rules:[{conditions:[lp,up],type:le,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ot]:Oe,[Dt]:Oe},type:T}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:bn}]},{conditions:fp,type:le,rules:[{conditions:[lp],type:le,rules:[{type:le,rules:[{conditions:[{[A]:$,[x]:["aws-us-gov",{[A]:Oi,[x]:[_p,"name"]}]}],endpoint:pp,type:T},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[Ot]:Oe,[Dt]:Oe},type:T}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:bn}]},{conditions:gp,type:le,rules:[{conditions:[up],type:le,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[Ot]:Oe,[Dt]:Oe},type:T}]},{error:"DualStack is enabled but this partition does not support DualStack",type:bn}]},{type:le,rules:[{conditions:mp,endpoint:{url:yp,[Ot]:{authSchemes:[{name:bi,signingRegion:Ni,signingName:Ti}]},[Dt]:Oe},type:T},{endpoint:pp,type:T}]}]}]},Rp=oS;var vp=(e,t={})=>Tt(Rp,{endpointParams:e,logger:t.logger});var Ip=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??vt,base64Encoder:(e==null?void 0:e.base64Encoder)??It,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??vp,logger:(e==null?void 0:e.logger)??new xe,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??J});var bp=e=>{wt(process.version);let t=Nt(e),r=()=>t().then(yt),n=Ip(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??At,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Zd(Jo),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??xt({serviceId:n.serviceId,clientVersion:Yd.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??C(lt),region:(e==null?void 0:e.region)??C(we,nt),requestHandler:(e==null?void 0:e.requestHandler)??new Ie(r),retryMode:(e==null?void 0:e.retryMode)??C({...pt,default:async()=>(await r()).retryMode||Ce}),sha256:(e==null?void 0:e.sha256)??ve.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Ct,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??C(tt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??C(rt),utf8Decoder:(e==null?void 0:e.utf8Decoder)??_t,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Rt}};var Vt=class extends _e{constructor(t){let r=bp(t),n=Jd(r),o=ot(n),s=it(o),i=ut(s),a=i,c=Kd(a,{stsClientCtor:Vt}),d=gt(c);super(d),this.config=d,this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(st(this.config)),this.middlewareStack.use(at(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(ht(this.config))}destroy(){super.destroy()}};var Tp=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,sS=(e={},t)=>ni(e,Tp(Vt,t)),iS=(e={},t)=>oi(e,Tp(Vt,t)),Np=e=>t=>e({roleAssumer:sS(t),roleAssumerWithWebIdentity:iS(t),...t});var Ge="fn",We="argv",$r="ref";var Pp="String",Di="PartitionResult",De="tree",Tn="error",Nn="endpoint",Op={required:!0,default:!1,type:"Boolean"},Up={[$r]:"Endpoint"},Mp={[Ge]:"booleanEquals",[We]:[{[$r]:"UseFIPS"},!0]},$p={[Ge]:"booleanEquals",[We]:[{[$r]:"UseDualStack"},!0]},ke={},Dp={[Ge]:"booleanEquals",[We]:[!0,{[Ge]:"getAttr",[We]:[{[$r]:Di},"supportsFIPS"]}]},kp={[Ge]:"booleanEquals",[We]:[!0,{[Ge]:"getAttr",[We]:[{[$r]:Di},"supportsDualStack"]}]},zp=[Up],Lp=[Mp],Fp=[$p],aS={version:"1.0",parameters:{Region:{required:!0,type:Pp},UseDualStack:Op,UseFIPS:Op,Endpoint:{required:!1,type:Pp}},rules:[{conditions:[{[Ge]:"aws.partition",[We]:[{[$r]:"Region"}],assign:Di}],type:De,rules:[{conditions:[{[Ge]:"isSet",[We]:zp},{[Ge]:"parseURL",[We]:zp,assign:"url"}],type:De,rules:[{conditions:Lp,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Tn},{type:De,rules:[{conditions:Fp,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Tn},{endpoint:{url:Up,properties:ke,headers:ke},type:Nn}]}]},{conditions:[Mp,$p],type:De,rules:[{conditions:[Dp,kp],type:De,rules:[{endpoint:{url:"https://apprunner-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ke,headers:ke},type:Nn}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Tn}]},{conditions:Lp,type:De,rules:[{conditions:[Dp],type:De,rules:[{type:De,rules:[{endpoint:{url:"https://apprunner-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ke,headers:ke},type:Nn}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Tn}]},{conditions:Fp,type:De,rules:[{conditions:[kp],type:De,rules:[{endpoint:{url:"https://apprunner.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ke,headers:ke},type:Nn}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Tn}]},{endpoint:{url:"https://apprunner.{Region}.{PartitionResult#dnsSuffix}",properties:ke,headers:ke},type:Nn}]}]},qp=aS;var jp=(e,t={})=>Tt(qp,{endpointParams:e,logger:t.logger});var Vp=e=>({apiVersion:"2020-05-15",base64Decoder:(e==null?void 0:e.base64Decoder)??vt,base64Encoder:(e==null?void 0:e.base64Encoder)??It,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??jp,logger:(e==null?void 0:e.logger)??new xe,serviceId:(e==null?void 0:e.serviceId)??"AppRunner",urlParser:(e==null?void 0:e.urlParser)??J});var Bp=e=>{wt(process.version);let t=Nt(e),r=()=>t().then(yt),n=Vp(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??At,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Np(Jo),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??xt({serviceId:n.serviceId,clientVersion:Kc.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??C(lt),region:(e==null?void 0:e.region)??C(we,nt),requestHandler:(e==null?void 0:e.requestHandler)??new Ie(r),retryMode:(e==null?void 0:e.retryMode)??C({...pt,default:async()=>(await r()).retryMode||Ce}),sha256:(e==null?void 0:e.sha256)??ve.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Ct,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??C(tt),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??C(rt),utf8Decoder:(e==null?void 0:e.utf8Decoder)??_t,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Rt}};var Yo=class extends _e{constructor(t){let r=Bp(t),n=Wc(r),o=ot(n),s=it(o),i=ut(s),a=i,c=ao(a),d=gt(c);super(d),this.config=d,this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(st(this.config)),this.middlewareStack.use(at(this.config)),this.middlewareStack.use(ct(this.config)),this.middlewareStack.use(dt(this.config)),this.middlewareStack.use(lo(this.config)),this.middlewareStack.use(ht(this.config))}destroy(){super.destroy()}};var L=class extends se{constructor(t){super(t),Object.setPrototypeOf(this,L.prototype)}};var Hp;(function(e){e.FAILED="FAILED",e.PENDING_VALIDATION="PENDING_VALIDATION",e.SUCCESS="SUCCESS"})(Hp||(Hp={}));var Gp;(function(e){e.ACTIVE="ACTIVE",e.BINDING_CERTIFICATE="BINDING_CERTIFICATE",e.CREATE_FAILED="CREATE_FAILED",e.CREATING="CREATING",e.DELETE_FAILED="DELETE_FAILED",e.DELETING="DELETING",e.PENDING_CERTIFICATE_DNS_VALIDATION="PENDING_CERTIFICATE_DNS_VALIDATION"})(Gp||(Gp={}));var qr=class extends L{constructor(t){super({name:"InternalServiceErrorException",$fault:"server",...t}),this.name="InternalServiceErrorException",this.$fault="server",Object.setPrototypeOf(this,qr.prototype),this.Message=t.Message}},jr=class extends L{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,jr.prototype),this.Message=t.Message}},Vr=class extends L{constructor(t){super({name:"InvalidStateException",$fault:"client",...t}),this.name="InvalidStateException",this.$fault="client",Object.setPrototypeOf(this,Vr.prototype),this.Message=t.Message}},Wp;(function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE"})(Wp||(Wp={}));var Br=class extends L{constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),this.name="ServiceQuotaExceededException",this.$fault="client",Object.setPrototypeOf(this,Br.prototype),this.Message=t.Message}},Kp;(function(e){e.GITHUB="GITHUB"})(Kp||(Kp={}));var Jp;(function(e){e.AVAILABLE="AVAILABLE",e.DELETED="DELETED",e.ERROR="ERROR",e.PENDING_HANDSHAKE="PENDING_HANDSHAKE"})(Jp||(Jp={}));var Yp;(function(e){e.AWSXRAY="AWSXRAY"})(Yp||(Yp={}));var Xp;(function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE"})(Xp||(Xp={}));var Qp;(function(e){e.HTTP="HTTP",e.TCP="TCP"})(Qp||(Qp={}));var Zp;(function(e){e.DEFAULT="DEFAULT",e.VPC="VPC"})(Zp||(Zp={}));var Hr;(function(e){e.CORRETTO_11="CORRETTO_11",e.CORRETTO_8="CORRETTO_8",e.DOTNET_6="DOTNET_6",e.GO_1="GO_1",e.NODEJS_12="NODEJS_12",e.NODEJS_14="NODEJS_14",e.NODEJS_16="NODEJS_16",e.PHP_81="PHP_81",e.PYTHON_3="PYTHON_3",e.RUBY_31="RUBY_31"})(Hr||(Hr={}));var em;(function(e){e.API="API",e.REPOSITORY="REPOSITORY"})(em||(em={}));var tm;(function(e){e.BRANCH="BRANCH"})(tm||(tm={}));var Pn;(function(e){e.ECR="ECR",e.ECR_PUBLIC="ECR_PUBLIC"})(Pn||(Pn={}));var zt;(function(e){e.CREATE_FAILED="CREATE_FAILED",e.DELETED="DELETED",e.DELETE_FAILED="DELETE_FAILED",e.OPERATION_IN_PROGRESS="OPERATION_IN_PROGRESS",e.PAUSED="PAUSED",e.RUNNING="RUNNING"})(zt||(zt={}));var rm;(function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE"})(rm||(rm={}));var nm;(function(e){e.AVAILABLE="AVAILABLE",e.DELETED="DELETED",e.FAILED_CREATION="FAILED_CREATION",e.FAILED_DELETION="FAILED_DELETION",e.FAILED_UPDATE="FAILED_UPDATE",e.PENDING_CREATION="PENDING_CREATION",e.PENDING_DELETION="PENDING_DELETION",e.PENDING_UPDATE="PENDING_UPDATE"})(nm||(nm={}));var Gr=class extends L{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Gr.prototype),this.Message=t.Message}},Xo;(function(e){e.FAILED="FAILED",e.IN_PROGRESS="IN_PROGRESS",e.PENDING="PENDING",e.ROLLBACK_FAILED="ROLLBACK_FAILED",e.ROLLBACK_IN_PROGRESS="ROLLBACK_IN_PROGRESS",e.ROLLBACK_SUCCEEDED="ROLLBACK_SUCCEEDED",e.SUCCEEDED="SUCCEEDED"})(Xo||(Xo={}));var om;(function(e){e.CREATE_SERVICE="CREATE_SERVICE",e.DELETE_SERVICE="DELETE_SERVICE",e.PAUSE_SERVICE="PAUSE_SERVICE",e.RESUME_SERVICE="RESUME_SERVICE",e.START_DEPLOYMENT="START_DEPLOYMENT"})(om||(om={}));var cS=e=>({...e,...e.BuildCommand&&{BuildCommand:ne},...e.StartCommand&&{StartCommand:ne},...e.RuntimeEnvironmentVariables&&{RuntimeEnvironmentVariables:ne},...e.RuntimeEnvironmentSecrets&&{RuntimeEnvironmentSecrets:ne}}),dS=e=>({...e,...e.CodeConfigurationValues&&{CodeConfigurationValues:cS(e.CodeConfigurationValues)}});var lS=e=>({...e,...e.CodeConfiguration&&{CodeConfiguration:dS(e.CodeConfiguration)}}),uS=e=>({...e,...e.RuntimeEnvironmentVariables&&{RuntimeEnvironmentVariables:ne},...e.StartCommand&&{StartCommand:ne},...e.RuntimeEnvironmentSecrets&&{RuntimeEnvironmentSecrets:ne}}),pS=e=>({...e,...e.ImageConfiguration&&{ImageConfiguration:uS(e.ImageConfiguration)}}),ki=e=>({...e,...e.CodeRepository&&{CodeRepository:lS(e.CodeRepository)},...e.ImageRepository&&{ImageRepository:pS(e.ImageRepository)}}),sm=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:ki(e.SourceConfiguration)}});var Qo=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:ki(e.SourceConfiguration)}}),im=e=>({...e,...e.Service&&{Service:Qo(e.Service)}});var am=e=>({...e}),cm=e=>({...e,...e.Service&&{Service:Qo(e.Service)}});var dm=e=>({...e}),lm=e=>({...e,...e.Service&&{Service:Qo(e.Service)}});var um=e=>({...e});var pm=e=>({...e}),mm=e=>({...e});var fm=e=>({...e});var gm=e=>({...e}),hm=e=>({...e});var ym=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:ki(e.SourceConfiguration)}}),wm=e=>({...e,...e.Service&&{Service:Qo(e.Service)}});var Em=async(e,t)=>{let r={"content-type":"application/x-amz-json-1.0","x-amz-target":"AppRunner.CreateService"},n;return n=JSON.stringify(RS(e,t)),Gt(t,r,"/",void 0,n)};var Sm=async(e,t)=>{let r={"content-type":"application/x-amz-json-1.0","x-amz-target":"AppRunner.DeleteService"},n;return n=JSON.stringify(vS(e,t)),Gt(t,r,"/",void 0,n)};var Cm=async(e,t)=>{let r={"content-type":"application/x-amz-json-1.0","x-amz-target":"AppRunner.DescribeService"},n;return n=JSON.stringify(IS(e,t)),Gt(t,r,"/",void 0,n)};var Am=async(e,t)=>{let r={"content-type":"application/x-amz-json-1.0","x-amz-target":"AppRunner.ListOperations"},n;return n=JSON.stringify(DS(e,t)),Gt(t,r,"/",void 0,n)},xm=async(e,t)=>{let r={"content-type":"application/x-amz-json-1.0","x-amz-target":"AppRunner.ListServices"},n;return n=JSON.stringify(kS(e,t)),Gt(t,r,"/",void 0,n)};var _m=async(e,t)=>{let r={"content-type":"application/x-amz-json-1.0","x-amz-target":"AppRunner.TagResource"},n;return n=JSON.stringify(FS(e,t)),Gt(t,r,"/",void 0,n)};var Rm=async(e,t)=>{let r={"content-type":"application/x-amz-json-1.0","x-amz-target":"AppRunner.UpdateService"},n;return n=JSON.stringify(US(e,t)),Gt(t,r,"/",void 0,n)};var vm=async(e,t)=>{if(e.statusCode>=300)return mS(e,t);let r=await Lt(e.body,t),n={};n=BS(r,t);let o={$metadata:ue(e),...n};return Promise.resolve(o)},mS=async(e,t)=>{let r={...e,body:await Wt(e.body,t)},n=Kt(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Bt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Ht(r,t);case"ServiceQuotaExceededException":case"com.amazonaws.apprunner#ServiceQuotaExceededException":throw await SS(r,t);default:let o=r.body;H({output:e,parsedBody:o,exceptionCtor:L,errorCode:n})}};var Im=async(e,t)=>{if(e.statusCode>=300)return fS(e,t);let r=await Lt(e.body,t),n={};n=HS(r,t);let o={$metadata:ue(e),...n};return Promise.resolve(o)},fS=async(e,t)=>{let r={...e,body:await Wt(e.body,t)},n=Kt(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Bt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Ht(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await zi(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await On(r,t);default:let o=r.body;H({output:e,parsedBody:o,exceptionCtor:L,errorCode:n})}};var bm=async(e,t)=>{if(e.statusCode>=300)return gS(e,t);let r=await Lt(e.body,t),n={};n=GS(r,t);let o={$metadata:ue(e),...n};return Promise.resolve(o)},gS=async(e,t)=>{let r={...e,body:await Wt(e.body,t)},n=Kt(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Bt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Ht(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await On(r,t);default:let o=r.body;H({output:e,parsedBody:o,exceptionCtor:L,errorCode:n})}};var Tm=async(e,t)=>{if(e.statusCode>=300)return hS(e,t);let r=await Lt(e.body,t),n={};n=nC(r,t);let o={$metadata:ue(e),...n};return Promise.resolve(o)},hS=async(e,t)=>{let r={...e,body:await Wt(e.body,t)},n=Kt(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Bt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Ht(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await On(r,t);default:let o=r.body;H({output:e,parsedBody:o,exceptionCtor:L,errorCode:n})}},Nm=async(e,t)=>{if(e.statusCode>=300)return yS(e,t);let r=await Lt(e.body,t),n={};n=oC(r,t);let o={$metadata:ue(e),...n};return Promise.resolve(o)},yS=async(e,t)=>{let r={...e,body:await Wt(e.body,t)},n=Kt(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Bt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Ht(r,t);default:let o=r.body;H({output:e,parsedBody:o,exceptionCtor:L,errorCode:n})}};var Pm=async(e,t)=>{if(e.statusCode>=300)return wS(e,t);let r=await Lt(e.body,t),n={};n=gC(r,t);let o={$metadata:ue(e),...n};return Promise.resolve(o)},wS=async(e,t)=>{let r={...e,body:await Wt(e.body,t)},n=Kt(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Bt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Ht(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await zi(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await On(r,t);default:let o=r.body;H({output:e,parsedBody:o,exceptionCtor:L,errorCode:n})}};var Om=async(e,t)=>{if(e.statusCode>=300)return ES(e,t);let r=await Lt(e.body,t),n={};n=hC(r,t);let o={$metadata:ue(e),...n};return Promise.resolve(o)},ES=async(e,t)=>{let r={...e,body:await Wt(e.body,t)},n=Kt(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Bt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Ht(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await zi(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await On(r,t);default:let o=r.body;H({output:e,parsedBody:o,exceptionCtor:L,errorCode:n})}};var Bt=async(e,t)=>{let r=e.body,n=eC(r,t),o=new qr({$metadata:ue(e),...n});return S(o,r)},Ht=async(e,t)=>{let r=e.body,n=tC(r,t),o=new jr({$metadata:ue(e),...n});return S(o,r)},zi=async(e,t)=>{let r=e.body,n=rC(r,t),o=new Vr({$metadata:ue(e),...n});return S(o,r)},On=async(e,t)=>{let r=e.body,n=cC(r,t),o=new Gr({$metadata:ue(e),...n});return S(o,r)},SS=async(e,t)=>{let r=e.body,n=lC(r,t),o=new Br({$metadata:ue(e),...n});return S(o,r)};var CS=(e,t)=>({...e.AccessRoleArn!=null&&{AccessRoleArn:e.AccessRoleArn},...e.ConnectionArn!=null&&{ConnectionArn:e.ConnectionArn}}),AS=(e,t)=>({...e.CodeConfigurationValues!=null&&{CodeConfigurationValues:xS(e.CodeConfigurationValues,t)},...e.ConfigurationSource!=null&&{ConfigurationSource:e.ConfigurationSource}}),xS=(e,t)=>({...e.BuildCommand!=null&&{BuildCommand:e.BuildCommand},...e.Port!=null&&{Port:e.Port},...e.Runtime!=null&&{Runtime:e.Runtime},...e.RuntimeEnvironmentSecrets!=null&&{RuntimeEnvironmentSecrets:Lm(e.RuntimeEnvironmentSecrets,t)},...e.RuntimeEnvironmentVariables!=null&&{RuntimeEnvironmentVariables:Fm(e.RuntimeEnvironmentVariables,t)},...e.StartCommand!=null&&{StartCommand:e.StartCommand}}),_S=(e,t)=>({...e.CodeConfiguration!=null&&{CodeConfiguration:AS(e.CodeConfiguration,t)},...e.RepositoryUrl!=null&&{RepositoryUrl:e.RepositoryUrl},...e.SourceCodeVersion!=null&&{SourceCodeVersion:zS(e.SourceCodeVersion,t)}});var RS=(e,t)=>({...e.AutoScalingConfigurationArn!=null&&{AutoScalingConfigurationArn:e.AutoScalingConfigurationArn},...e.EncryptionConfiguration!=null&&{EncryptionConfiguration:TS(e.EncryptionConfiguration,t)},...e.HealthCheckConfiguration!=null&&{HealthCheckConfiguration:Dm(e.HealthCheckConfiguration,t)},...e.InstanceConfiguration!=null&&{InstanceConfiguration:km(e.InstanceConfiguration,t)},...e.NetworkConfiguration!=null&&{NetworkConfiguration:zm(e.NetworkConfiguration,t)},...e.ObservabilityConfiguration!=null&&{ObservabilityConfiguration:Um(e.ObservabilityConfiguration,t)},...e.ServiceName!=null&&{ServiceName:e.ServiceName},...e.SourceConfiguration!=null&&{SourceConfiguration:Mm(e.SourceConfiguration,t)},...e.Tags!=null&&{Tags:$m(e.Tags,t)}});var vS=(e,t)=>({...e.ServiceArn!=null&&{ServiceArn:e.ServiceArn}});var IS=(e,t)=>({...e.ServiceArn!=null&&{ServiceArn:e.ServiceArn}});var bS=(e,t)=>({...e.EgressType!=null&&{EgressType:e.EgressType},...e.VpcConnectorArn!=null&&{VpcConnectorArn:e.VpcConnectorArn}}),TS=(e,t)=>({...e.KmsKey!=null&&{KmsKey:e.KmsKey}}),Dm=(e,t)=>({...e.HealthyThreshold!=null&&{HealthyThreshold:e.HealthyThreshold},...e.Interval!=null&&{Interval:e.Interval},...e.Path!=null&&{Path:e.Path},...e.Protocol!=null&&{Protocol:e.Protocol},...e.Timeout!=null&&{Timeout:e.Timeout},...e.UnhealthyThreshold!=null&&{UnhealthyThreshold:e.UnhealthyThreshold}}),NS=(e,t)=>({...e.Port!=null&&{Port:e.Port},...e.RuntimeEnvironmentSecrets!=null&&{RuntimeEnvironmentSecrets:Lm(e.RuntimeEnvironmentSecrets,t)},...e.RuntimeEnvironmentVariables!=null&&{RuntimeEnvironmentVariables:Fm(e.RuntimeEnvironmentVariables,t)},...e.StartCommand!=null&&{StartCommand:e.StartCommand}}),PS=(e,t)=>({...e.ImageConfiguration!=null&&{ImageConfiguration:NS(e.ImageConfiguration,t)},...e.ImageIdentifier!=null&&{ImageIdentifier:e.ImageIdentifier},...e.ImageRepositoryType!=null&&{ImageRepositoryType:e.ImageRepositoryType}}),OS=(e,t)=>({...e.IsPubliclyAccessible!=null&&{IsPubliclyAccessible:e.IsPubliclyAccessible}});var km=(e,t)=>({...e.Cpu!=null&&{Cpu:e.Cpu},...e.InstanceRoleArn!=null&&{InstanceRoleArn:e.InstanceRoleArn},...e.Memory!=null&&{Memory:e.Memory}});var DS=(e,t)=>({...e.MaxResults!=null&&{MaxResults:e.MaxResults},...e.NextToken!=null&&{NextToken:e.NextToken},...e.ServiceArn!=null&&{ServiceArn:e.ServiceArn}}),kS=(e,t)=>({...e.MaxResults!=null&&{MaxResults:e.MaxResults},...e.NextToken!=null&&{NextToken:e.NextToken}});var zm=(e,t)=>({...e.EgressConfiguration!=null&&{EgressConfiguration:bS(e.EgressConfiguration,t)},...e.IngressConfiguration!=null&&{IngressConfiguration:OS(e.IngressConfiguration,t)}});var Lm=(e,t)=>Object.entries(e).reduce((r,[n,o])=>(o===null||(r[n]=o),r),{}),Fm=(e,t)=>Object.entries(e).reduce((r,[n,o])=>(o===null||(r[n]=o),r),{}),Um=(e,t)=>({...e.ObservabilityConfigurationArn!=null&&{ObservabilityConfigurationArn:e.ObservabilityConfigurationArn},...e.ObservabilityEnabled!=null&&{ObservabilityEnabled:e.ObservabilityEnabled}}),zS=(e,t)=>({...e.Type!=null&&{Type:e.Type},...e.Value!=null&&{Value:e.Value}}),Mm=(e,t)=>({...e.AuthenticationConfiguration!=null&&{AuthenticationConfiguration:CS(e.AuthenticationConfiguration,t)},...e.AutoDeploymentsEnabled!=null&&{AutoDeploymentsEnabled:e.AutoDeploymentsEnabled},...e.CodeRepository!=null&&{CodeRepository:_S(e.CodeRepository,t)},...e.ImageRepository!=null&&{ImageRepository:PS(e.ImageRepository,t)}});var LS=(e,t)=>({...e.Key!=null&&{Key:e.Key},...e.Value!=null&&{Value:e.Value}});var $m=(e,t)=>e.filter(r=>r!=null).map(r=>LS(r,t)),FS=(e,t)=>({...e.ResourceArn!=null&&{ResourceArn:e.ResourceArn},...e.Tags!=null&&{Tags:$m(e.Tags,t)}});var US=(e,t)=>({...e.AutoScalingConfigurationArn!=null&&{AutoScalingConfigurationArn:e.AutoScalingConfigurationArn},...e.HealthCheckConfiguration!=null&&{HealthCheckConfiguration:Dm(e.HealthCheckConfiguration,t)},...e.InstanceConfiguration!=null&&{InstanceConfiguration:km(e.InstanceConfiguration,t)},...e.NetworkConfiguration!=null&&{NetworkConfiguration:zm(e.NetworkConfiguration,t)},...e.ObservabilityConfiguration!=null&&{ObservabilityConfiguration:Um(e.ObservabilityConfiguration,t)},...e.ServiceArn!=null&&{ServiceArn:e.ServiceArn},...e.SourceConfiguration!=null&&{SourceConfiguration:Mm(e.SourceConfiguration,t)}});var MS=(e,t)=>({AccessRoleArn:m(e.AccessRoleArn),ConnectionArn:m(e.ConnectionArn)});var $S=(e,t)=>({AutoScalingConfigurationArn:m(e.AutoScalingConfigurationArn),AutoScalingConfigurationName:m(e.AutoScalingConfigurationName),AutoScalingConfigurationRevision:Re(e.AutoScalingConfigurationRevision)});var qS=(e,t)=>({CodeConfigurationValues:e.CodeConfigurationValues!=null?jS(e.CodeConfigurationValues,t):void 0,ConfigurationSource:m(e.ConfigurationSource)}),jS=(e,t)=>({BuildCommand:m(e.BuildCommand),Port:m(e.Port),Runtime:m(e.Runtime),RuntimeEnvironmentSecrets:e.RuntimeEnvironmentSecrets!=null?qm(e.RuntimeEnvironmentSecrets,t):void 0,RuntimeEnvironmentVariables:e.RuntimeEnvironmentVariables!=null?jm(e.RuntimeEnvironmentVariables,t):void 0,StartCommand:m(e.StartCommand)}),VS=(e,t)=>({CodeConfiguration:e.CodeConfiguration!=null?qS(e.CodeConfiguration,t):void 0,RepositoryUrl:m(e.RepositoryUrl),SourceCodeVersion:e.SourceCodeVersion!=null?mC(e.SourceCodeVersion,t):void 0});var BS=(e,t)=>({OperationId:m(e.OperationId),Service:e.Service!=null?Zo(e.Service,t):void 0});var HS=(e,t)=>({OperationId:m(e.OperationId),Service:e.Service!=null?Zo(e.Service,t):void 0});var GS=(e,t)=>({Service:e.Service!=null?Zo(e.Service,t):void 0});var WS=(e,t)=>({EgressType:m(e.EgressType),VpcConnectorArn:m(e.VpcConnectorArn)}),KS=(e,t)=>({KmsKey:m(e.KmsKey)}),JS=(e,t)=>({HealthyThreshold:Re(e.HealthyThreshold),Interval:Re(e.Interval),Path:m(e.Path),Protocol:m(e.Protocol),Timeout:Re(e.Timeout),UnhealthyThreshold:Re(e.UnhealthyThreshold)}),YS=(e,t)=>({Port:m(e.Port),RuntimeEnvironmentSecrets:e.RuntimeEnvironmentSecrets!=null?qm(e.RuntimeEnvironmentSecrets,t):void 0,RuntimeEnvironmentVariables:e.RuntimeEnvironmentVariables!=null?jm(e.RuntimeEnvironmentVariables,t):void 0,StartCommand:m(e.StartCommand)}),XS=(e,t)=>({ImageConfiguration:e.ImageConfiguration!=null?YS(e.ImageConfiguration,t):void 0,ImageIdentifier:m(e.ImageIdentifier),ImageRepositoryType:m(e.ImageRepositoryType)}),QS=(e,t)=>({IsPubliclyAccessible:fo(e.IsPubliclyAccessible)});var ZS=(e,t)=>({Cpu:m(e.Cpu),InstanceRoleArn:m(e.InstanceRoleArn),Memory:m(e.Memory)}),eC=(e,t)=>({Message:m(e.Message)}),tC=(e,t)=>({Message:m(e.Message)}),rC=(e,t)=>({Message:m(e.Message)});var nC=(e,t)=>({NextToken:m(e.NextToken),OperationSummaryList:e.OperationSummaryList!=null?aC(e.OperationSummaryList,t):void 0}),oC=(e,t)=>({NextToken:m(e.NextToken),ServiceSummaryList:e.ServiceSummaryList!=null?pC(e.ServiceSummaryList,t):void 0});var sC=(e,t)=>({EgressConfiguration:e.EgressConfiguration!=null?WS(e.EgressConfiguration,t):void 0,IngressConfiguration:e.IngressConfiguration!=null?QS(e.IngressConfiguration,t):void 0});var iC=(e,t)=>({EndedAt:e.EndedAt!=null?M(Fe(oe(e.EndedAt))):void 0,Id:m(e.Id),StartedAt:e.StartedAt!=null?M(Fe(oe(e.StartedAt))):void 0,Status:m(e.Status),TargetArn:m(e.TargetArn),Type:m(e.Type),UpdatedAt:e.UpdatedAt!=null?M(Fe(oe(e.UpdatedAt))):void 0}),aC=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:iC(n,t));var cC=(e,t)=>({Message:m(e.Message)});var qm=(e,t)=>Object.entries(e).reduce((r,[n,o])=>(o===null||(r[n]=m(o)),r),{}),jm=(e,t)=>Object.entries(e).reduce((r,[n,o])=>(o===null||(r[n]=m(o)),r),{}),Zo=(e,t)=>({AutoScalingConfigurationSummary:e.AutoScalingConfigurationSummary!=null?$S(e.AutoScalingConfigurationSummary,t):void 0,CreatedAt:e.CreatedAt!=null?M(Fe(oe(e.CreatedAt))):void 0,DeletedAt:e.DeletedAt!=null?M(Fe(oe(e.DeletedAt))):void 0,EncryptionConfiguration:e.EncryptionConfiguration!=null?KS(e.EncryptionConfiguration,t):void 0,HealthCheckConfiguration:e.HealthCheckConfiguration!=null?JS(e.HealthCheckConfiguration,t):void 0,InstanceConfiguration:e.InstanceConfiguration!=null?ZS(e.InstanceConfiguration,t):void 0,NetworkConfiguration:e.NetworkConfiguration!=null?sC(e.NetworkConfiguration,t):void 0,ObservabilityConfiguration:e.ObservabilityConfiguration!=null?dC(e.ObservabilityConfiguration,t):void 0,ServiceArn:m(e.ServiceArn),ServiceId:m(e.ServiceId),ServiceName:m(e.ServiceName),ServiceUrl:m(e.ServiceUrl),SourceConfiguration:e.SourceConfiguration!=null?fC(e.SourceConfiguration,t):void 0,Status:m(e.Status),UpdatedAt:e.UpdatedAt!=null?M(Fe(oe(e.UpdatedAt))):void 0}),dC=(e,t)=>({ObservabilityConfigurationArn:m(e.ObservabilityConfigurationArn),ObservabilityEnabled:fo(e.ObservabilityEnabled)}),lC=(e,t)=>({Message:m(e.Message)}),uC=(e,t)=>({CreatedAt:e.CreatedAt!=null?M(Fe(oe(e.CreatedAt))):void 0,ServiceArn:m(e.ServiceArn),ServiceId:m(e.ServiceId),ServiceName:m(e.ServiceName),ServiceUrl:m(e.ServiceUrl),Status:m(e.Status),UpdatedAt:e.UpdatedAt!=null?M(Fe(oe(e.UpdatedAt))):void 0}),pC=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>n===null?null:uC(n,t)),mC=(e,t)=>({Type:m(e.Type),Value:m(e.Value)}),fC=(e,t)=>({AuthenticationConfiguration:e.AuthenticationConfiguration!=null?MS(e.AuthenticationConfiguration,t):void 0,AutoDeploymentsEnabled:fo(e.AutoDeploymentsEnabled),CodeRepository:e.CodeRepository!=null?VS(e.CodeRepository,t):void 0,ImageRepository:e.ImageRepository!=null?XS(e.ImageRepository,t):void 0});var gC=(e,t)=>({});var hC=(e,t)=>({OperationId:m(e.OperationId),Service:e.Service!=null?Zo(e.Service,t):void 0});var ue=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),yC=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),wC=(e,t)=>yC(e,t).then(r=>t.utf8Encoder(r)),Gt=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new R(d)},Lt=(e,t)=>wC(e,t).then(r=>r.length?JSON.parse(r):{}),Wt=async(e,t)=>{let r=await Lt(e,t);return r.message=r.message??r.Message,r},Kt=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Wr=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Wr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"CreateServiceCommand",inputFilterSensitiveLog:sm,outputFilterSensitiveLog:im},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Em(t,r)}deserialize(t,r){return vm(t,r)}};var Kr=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Kr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"DeleteServiceCommand",inputFilterSensitiveLog:am,outputFilterSensitiveLog:cm},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Sm(t,r)}deserialize(t,r){return Im(t,r)}};var Jr=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Jr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"DescribeServiceCommand",inputFilterSensitiveLog:dm,outputFilterSensitiveLog:lm},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Cm(t,r)}deserialize(t,r){return bm(t,r)}};var Yr=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Yr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"ListOperationsCommand",inputFilterSensitiveLog:um,outputFilterSensitiveLog:pm},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Am(t,r)}deserialize(t,r){return Tm(t,r)}};var Xr=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Xr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"ListServicesCommand",inputFilterSensitiveLog:mm,outputFilterSensitiveLog:fm},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return xm(t,r)}deserialize(t,r){return Nm(t,r)}};var Qr=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Qr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:gm,outputFilterSensitiveLog:hm},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return _m(t,r)}deserialize(t,r){return Pm(t,r)}};var Zr=class extends b{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Zr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"UpdateServiceCommand",inputFilterSensitiveLog:ym,outputFilterSensitiveLog:wm},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Rm(t,r)}deserialize(t,r){return Om(t,r)}};var cf=Ke(er());var D=Ke(er());function Hm(e,t){let r=(0,D.getInput)(e,{required:!1,trimWhitespace:!0});if(!r)return;let n=Number(r);if(isNaN(n))throw new Error(`${e} value is not a valid number: ${r}`);if(t!=null&&t.min&&t.min>n)throw new Error(`${e} value (${n}) is less then the allowed minimum (${t.min})`);if(t!=null&&t.max&&t.max<n)throw new Error(`${e} value (${n}) is greater then the allowed maximum (${t.max})`);return n}function Li(e,t,r){return Hm(e,r)??t}function EC(e,t){return(0,D.getInput)(e,{required:!1,trimWhitespace:!0})||t}function Vm(e,t){let r=(0,D.getInput)(e,{required:!1,...t});return r.length>0?r:void 0}function SC(e,t){let r=(0,D.getInput)(e,{required:!1,trimWhitespace:!0});return r?["1","true"].includes(r.toLowerCase()):t}function Gm(){let e=(0,D.getInput)("action",{required:!1,trimWhitespace:!0});switch(e.toLowerCase()||"create_or_update"){case"create_or_update":return CC();default:throw new Error(`Unsupported action: ${e}`)}}function CC(){let e="create_or_update",t=(0,D.getInput)("service",{required:!0,trimWhitespace:!0}),r=Li("port",80),n=EC("region","us-east-1"),o=SC("wait-for-service-stability",!1),s=Hm("wait-for-service-stability-seconds",{min:10,max:3600}),i=Li("cpu",1),a=Li("memory",2),c=(0,D.getInput)("image",{required:!1,trimWhitespace:!0}),d=(0,D.getMultilineInput)("copy-env-vars",{required:!1}),l=(0,D.getMultilineInput)("copy-secret-env-vars",{required:!1}),u=(0,D.getInput)("tags",{required:!1}),p=Vm("auto-scaling-config-arn",{trimWhitespace:!0}),f=Vm("instance-role-arn",{trimWhitespace:!0});return{action:e,serviceName:t,region:n,port:r,waitForService:o||!!s,waitTimeout:s??600,cpu:i,memory:a,sourceConfig:c?xC(c):_C(),environment:Bm(d),environmentSecret:Bm(l),tags:vC(u),autoScalingConfigArn:p,instanceRoleArn:f}}function AC(){let e=(0,D.getInput)("branch",{required:!1})||"main";return e.startsWith("refs/")?e.split("/")[2]:e}function xC(e){if((0,D.getInput)("repo",{required:!1}))throw new Error("Either docker image registry or code repository expected, not both");return{sourceType:"image",imageUri:e,accessRoleArn:(0,D.getInput)("access-role-arn",{required:!0})}}function _C(){return{sourceType:"code",sourceConnectionArn:(0,D.getInput)("source-connection-arn",{required:!0}),repoUrl:(0,D.getInput)("repo",{required:!0}),branch:AC(),runtime:RC(),buildCommand:(0,D.getInput)("build-command",{required:!0}),startCommand:(0,D.getInput)("start-command",{required:!0})}}function RC(){let e=(0,D.getInput)("runtime",{required:!0}),t=e.toUpperCase();if(!Object.keys(Hr).includes(t))throw new Error(`Specified runtime (${e}) does not belong to the supported range: ${JSON.stringify(Object.keys(Hr))}`);return Hr[t]}function Bm(e){if(e.length>0){let t=e.reduce((r,n)=>{let o=process.env[n];return o!==void 0&&(r[n]=o),r},{});if(Object.keys(t).length>0)return t}}function vC(e){if(!e.length)return[];let t=JSON.parse(e);return Object.keys(t).reduce((r,n)=>[...r,{Key:n,Value:t[n]}],[])}var Z=Ke(er());function Wm(e){return new Wr({ServiceName:e.serviceName,InstanceConfiguration:{Cpu:`${e.cpu} vCPU`,Memory:`${e.memory} GB`,InstanceRoleArn:e.instanceRoleArn},AutoScalingConfigurationArn:e.autoScalingConfigArn,SourceConfiguration:e.sourceConfig.sourceType=="image"?tf(e.port,e.sourceConfig,e.environment,e.environmentSecret):ef(e.port,e.sourceConfig,e.environment,e.environmentSecret),Tags:e.tags})}function Km(e,t){return new Zr({ServiceArn:e,InstanceConfiguration:{Cpu:`${t.cpu} vCPU`,Memory:`${t.memory} GB`,InstanceRoleArn:t.instanceRoleArn},AutoScalingConfigurationArn:t.autoScalingConfigArn,SourceConfiguration:t.sourceConfig.sourceType=="image"?tf(t.port,t.sourceConfig,t.environment,t.environmentSecret):ef(t.port,t.sourceConfig,t.environment,t.environmentSecret)})}function Jm(e,t){return new Qr({ResourceArn:e,Tags:t.tags})}function Ym(e){return new Kr({ServiceArn:e})}function Xm(e){return new Jr({ServiceArn:e})}function Qm(e){return new Xr({NextToken:e})}function Zm(e){return new Yr({ServiceArn:e})}function IC(e){return e.startsWith("public.ecr")?Pn.ECR_PUBLIC:Pn.ECR}function ef(e,t,r,n){return{AuthenticationConfiguration:{ConnectionArn:t.sourceConnectionArn},AutoDeploymentsEnabled:!0,CodeRepository:{RepositoryUrl:t.repoUrl,SourceCodeVersion:{Type:"BRANCH",Value:t.branch},CodeConfiguration:{ConfigurationSource:"API",CodeConfigurationValues:{Runtime:t.runtime,BuildCommand:t.buildCommand,StartCommand:t.startCommand,Port:`${e}`,RuntimeEnvironmentVariables:r,RuntimeEnvironmentSecrets:n}}}}}function tf(e,t,r,n){return{AuthenticationConfiguration:{AccessRoleArn:t.accessRoleArn},ImageRepository:{ImageIdentifier:t.imageUri,ImageRepositoryType:IC(t.imageUri),ImageConfiguration:{Port:`${e}`,RuntimeEnvironmentVariables:r,RuntimeEnvironmentSecrets:n}}}}function bC(e){return new Promise(t=>setTimeout(t,e))}async function nf(e,t){let r;do{let n=await e.send(Qm(r));if(r=n.NextToken,n.ServiceSummaryList){for(let o of n.ServiceSummaryList)if(o.ServiceName===t&&o.ServiceArn)return(0,Z.info)(`Discovered ${t} (${o.ServiceArn}) with the following status: ${o.Status}`),{ServiceArn:o.ServiceArn,Status:o.Status}}}while(r)}async function rf(e,t){(0,Z.info)(`Creating service ${t.serviceName}`);let r=Wm(t);return(await e.send(r)).Service}async function TC(e,t,r){(0,Z.info)(`Updating existing service ${t.serviceName} (${r})`);let n=Km(r,t);return await e.send(n)}async function NC(e,t,r){if((0,Z.info)(`Updating tags service ${t.serviceName} (${r})`),t.tags.length){let n=Jm(r,t);await e.send(n)}}async function PC(e,t,r){(0,Z.info)(`Deleting existing service ${t.serviceName} (${r})`);let n=Ym(r),o=await e.send(n);(0,Z.info)(`Delete service response: ${JSON.stringify(o.Service)}`)}async function OC(e,t){let r=Zm(t);return(await e.send(r)).OperationSummaryList}async function DC(e,t,r){if(!t)throw new Error(`Failed to create or update service ${e.serviceName} - App Runner Client returned an empty response`);let n=t.ServiceId;if(n)(0,Z.info)(`Service ID: ${n}`);else throw new Error(`App Runner Client returned an empty ServiceId for ${e.serviceName}`);let o=t.ServiceArn;if(o)(0,Z.info)(`Service ARN: ${o}`);else throw new Error(`App Runner Client returned an empty ServiceArn for ${e.serviceName}`);let s=t.ServiceUrl??"";return s===""?(0,Z.info)(`App Runner Client returned an empty ServiceUrl for ${e.serviceName}, this could happen if the deployment is of an AWS App Runner Private Service`):(0,Z.info)(`Service URL: ${s}`),{ServiceId:n,ServiceArn:o,ServiceUrl:s,OperationId:r}}async function of(e,t,r){let n,o;if(r)if((0,Z.info)(`Existing service info: ${JSON.stringify(r)}`),r.Status===zt.CREATE_FAILED){await PC(e,t,r.ServiceArn);let s=await Fi(e,r.ServiceArn,900);if(s===zt.DELETED)n=await rf(e,t);else throw new Error(`Failed to delete service ${t.serviceName} (${r.ServiceArn}). Its current status is ${s}`)}else{await NC(e,t,r.ServiceArn);let s=await TC(e,t,r.ServiceArn);n=s.Service,o=s.OperationId}else n=await rf(e,t);return DC(t,n,o)}async function kC(e,t){let n=(await e.send(Xm(t))).Service;if(!n)throw new Error(`App Runner Client returned an empty Service for ${t}`);return{ServiceArn:t,Status:n.Status}}async function sf(e,t,r){let n=await OC(e,t);if(n){for(let o of n)if(r===o.Id&&o.Status!==Xo.SUCCEEDED)throw new Error(`Operation ${r} is not successful. Its current status is ${o.Status}`)}}async function Fi(e,t,r){let n=new Date(new Date().getTime()+r*1e3).getTime(),o=zt.OPERATION_IN_PROGRESS;for((0,Z.info)(`Waiting for ${t} to reach stable state`);o===zt.OPERATION_IN_PROGRESS&&n>=new Date().getTime();){let s=new Date().getTime();if(o=(await kC(e,t)).Status,o!==zt.OPERATION_IN_PROGRESS)return(0,Z.info)(`Service ${t} has reached the stable state ${o}`),o;let c=1e3-(new Date().getTime()-s);c>0&&await bC(c)}throw new Error(`Service ${t} did not reach stable state within ${r} seconds`)}var af="2.4.0";async function df(){try{let e=Gm(),t=new Yo({region:e.region}),r=await nf(t,e.serviceName),n=await of(t,e,r);(0,pe.setOutput)("service-id",n.ServiceId),(0,pe.setOutput)("service-arn",n.ServiceArn),(0,pe.setOutput)("service-url",n.ServiceUrl),e.waitForService?(await Fi(t,n.ServiceArn,e.waitTimeout),r&&n.OperationId&&await sf(t,n.ServiceArn,n.OperationId)):(0,pe.info)(`Service ${n.ServiceId} has started an update. Watch for its progress in the AppRunner console`)}catch(e){e instanceof Error?((0,pe.setFailed)(e.message),(0,cf.debug)(e.stack??"no stack info")):(0,pe.setFailed)(JSON.stringify(e))}}require.main===module&&((0,pe.info)(`Version: ${af??"undefined"}`),df().then(()=>{(0,pe.info)("App Runner step - DONE!")}).catch(e=>{(0,pe.setFailed)(`App Runner unhandled exception: ${e.message}`)}));0&&(module.exports={run});
